(()=>{var e={};e.id=898,e.ids=[898],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},2422:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>c}),r(4410),r(7919),r(5866);var t=r(3191),s=r(8716),n=r(7922),i=r.n(n),o=r(5231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(a,d);let c=["",{children:["admin",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4410)),"/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/admin/calendar/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7919)),"/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/admin/calendar/page.tsx"],u="/admin/calendar/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/calendar/page",pathname:"/admin/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7544:(e,a,r)=>{Promise.resolve().then(r.bind(r,7659))},5047:(e,a,r)=>{"use strict";var t=r(7389);r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},8472:()=>{},1596:(e,a,r)=>{"use strict";r(8472);var t=r(7577),s=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(t),n="undefined"!=typeof process&&process.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var a=void 0===e?{}:e,r=a.name,t=void 0===r?"stylesheet":r,s=a.optimizeForSpeed,o=void 0===s?n:s;d(i(t),"`name` must be a string"),this._name=t,this._deletedRulePlaceholder="#"+t+"-deleted-rule____{}",d("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var a=e.prototype;return a.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},a.isOptimizeForSpeed=function(){return this._optimizeForSpeed},a.inject=function(){var e=this;d(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(a,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:a}:e._serverSheet.cssRules.push({cssText:a}),r},deleteRule:function(a){e._serverSheet.cssRules[a]=null}}},a.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].ownerNode===e)return document.styleSheets[a]},a.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},a.insertRule=function(e,a){return d(i(e),"`insertRule` accepts only strings"),"number"!=typeof a&&(a=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,a),this._rulesCount++},a.replaceRule=function(e,a){this._optimizeForSpeed;var r=this._serverSheet;if(a.trim()||(a=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(a,e)}catch(t){n||console.warn("StyleSheet: illegal rule: \n\n"+a+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}return e},a.deleteRule=function(e){this._serverSheet.deleteRule(e)},a.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},a.cssRules=function(){return this._serverSheet.cssRules},a.makeStyleTag=function(e,a,r){a&&d(i(a),"makeStyleTag accepts only strings as second parameter");var t=document.createElement("style");this._nonce&&t.setAttribute("nonce",this._nonce),t.type="text/css",t.setAttribute("data-"+e,""),a&&t.appendChild(document.createTextNode(a));var s=document.head||document.getElementsByTagName("head")[0];return r?s.insertBefore(t,r):s.appendChild(t),t},function(e,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,a){if(!e)throw Error("StyleSheet: "+a+".")}var c=function(e){for(var a=5381,r=e.length;r;)a=33*a^e.charCodeAt(--r);return a>>>0},l={};function u(e,a){if(!a)return"jsx-"+e;var r=String(a),t=e+r;return l[t]||(l[t]="jsx-"+c(e+"-"+r)),l[t]}function x(e,a){var r=e+(a=a.replace(/\/style/gi,"\\/style"));return l[r]||(l[r]=a.replace(/__jsx-style-dynamic-selector/g,e)),l[r]}var m=t.createContext(null);m.displayName="StyleSheetContext",s.default.useInsertionEffect||s.default.useLayoutEffect;var b=void 0;function p(e){var a=b||t.useContext(m);return a&&a.add(e),null}p.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},a.style=p},7626:(e,a,r)=>{"use strict";e.exports=r(1596).style},7659:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>l});var t=r(326),s=r(7626),n=r.n(s),i=r(7577),o=r(5047);r(4856),r(5920),r(76);var d=r(4293);function c({onClose:e}){let[a,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(!0),[c,l]=(0,i.useState)([]),[u,x]=(0,i.useState)(""),[m,b]=(0,i.useState)("full-day"),[p,g]=(0,i.useState)("09:00"),[f,h]=(0,i.useState)("18:00"),[j,k]=(0,i.useState)(""),[w,y]=(0,i.useState)(""),[v,z]=(0,i.useState)(""),[D,S]=(0,i.useState)(!1),[N,F]=(0,i.useState)(null),[_,C]=(0,i.useState)(null),[T,$]=(0,i.useState)([]),[A,B]=(0,i.useState)(!1),[E,P]=(0,i.useState)(!1),R=e=>{try{let[a,r,t]=e.split("-");return`${t}/${r}/${a}`}catch(a){return console.warn("Fehler beim Formatieren des Datums:",e),e}},I=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00"],Z=async()=>{try{S(!0),F(null);let e=await (0,d.hS)();l(e),console.log("âœ… Gesperrte Zeiten geladen:",e.length),0===e.length&&console.info("â„¹ï¸ Keine gesperrten Zeiten gefunden. Das ist normal wenn noch keine erstellt wurden.")}catch(e){console.error("Fehler beim Laden der gesperrten Zeiten:",e),e.message?.includes("index")?(F("âš ï¸ Firebase Index wird erstellt... Die Liste wird in wenigen Minuten verf\xfcgbar sein. Sperrungen funktionieren bereits!"),console.warn("\uD83D\uDCA1 Hinweis: Das Index-Problem behebt sich automatisch. Sperrungen funktionieren trotzdem!")):F("âŒ Fehler beim Laden der gesperrten Zeiten")}finally{S(!1)}},q=(e,a)=>{if(!e||!a)return 0;let r=new Date(e);return Math.ceil((new Date(a).getTime()-r.getTime())/864e5)+1},L=async()=>{if(console.log("\uD83D\uDD27 DEBUG: handleBlock gestartet",{blockType:m,selectedDate:u,startDate:j,endDate:w,startTime:p,endTime:f,reason:v.trim(),userUid:a?.uid,user:a?"vorhanden":"nicht vorhanden",isUserLoading:s}),s){F("â³ Benutzer wird geladen, bitte warten...");return}if(!a?.uid){F("âŒ Benutzer nicht authentifiziert. Bitte laden Sie die Seite neu."),console.error("âŒ Kein currentUser.uid vorhanden:",a);return}if(!v.trim()){F("âŒ Bitte geben Sie einen Grund f\xfcr die Sperrung an");return}if("date-range"===m){if(!j){F("âŒ Bitte w\xe4hlen Sie ein Startdatum aus");return}if(!w){F("âŒ Bitte w\xe4hlen Sie ein Enddatum aus");return}if(new Date(j)>new Date(w)){F("âŒ Startdatum muss vor oder gleich dem Enddatum liegen");return}let e=q(j,w);if(e>365){F("âŒ Maximal 365 Tage k\xf6nnen gleichzeitig gesperrt werden");return}if(e>30&&!window.confirm(`M\xf6chten Sie wirklich ${e} Tage sperren? (${j} bis ${w})`))return}else if("time-range"===m){if(!u){F("âŒ Bitte w\xe4hlen Sie ein Datum aus");return}if(!p){F("âŒ Bitte w\xe4hlen Sie eine Startzeit aus");return}if(!f){F("âŒ Bitte w\xe4hlen Sie eine Endzeit aus");return}}else if(!u){F("âŒ Bitte w\xe4hlen Sie ein Datum aus");return}console.log("âœ… Alle Validierungen bestanden, starte Sperrung...");try{let e;if(S(!0),F(null),C(null),console.log("\uD83D\uDE80 F\xfchre Sperrung aus...",m),"full-day"===m?(console.log("\uD83D\uDCC5 Sperre ganzen Tag:",u),e=await (0,d.IJ)(u,v.trim(),a.uid)):"date-range"===m?(console.log("\uD83C\uDFD6ï¸ Sperre Datumsbereich:",j,"bis",w),e=await (0,d.wi)(j,w,v.trim(),a.uid)):(console.log("â° Sperre Zeitbereich:",u,p,"-",f),e=await (0,d.VR)(u,p,f,v.trim(),a.uid)),console.log("\uD83D\uDCCB Sperrung-Ergebnis:",e),e.success){let a="";if("full-day"===m)a=`âœ… Ganzer Tag erfolgreich gesperrt: ${u}`;else if("date-range"===m){let e=q(j,w);a=`âœ… ${e} Tage erfolgreich gesperrt: ${j} bis ${w}`}else a=`âœ… Zeitraum erfolgreich gesperrt: ${u} von ${p} bis ${f} Uhr`;let r=e.error||a;C(r),console.log("\uD83C\uDF89 Erfolgsmeldung gesetzt:",r),x(""),k(""),y(""),z(""),g("09:00"),h("18:00"),console.log("\uD83D\uDD04 Lade gesperrte Zeiten neu..."),await Z(),console.log("âœ… Liste wurde aktualisiert")}else{let a=e.error||"âŒ Unbekannter Fehler beim Sperren";F(a),console.error("âŒ Sperrung fehlgeschlagen:",a)}}catch(e){console.error("Fehler beim Sperren:",e),F("Ein unerwarteter Fehler ist aufgetreten")}finally{S(!1)}},G=async e=>{if(window.confirm("M\xf6chten Sie diese Sperrung wirklich aufheben?"))try{S(!0);let a=await (0,d.NB)(e);a.success?(C("Sperrung erfolgreich aufgehoben"),await Z()):F(a.error||"Fehler beim Aufheben der Sperrung")}catch(e){console.error("Fehler beim Aufheben der Sperrung:",e),F("Ein unerwarteter Fehler ist aufgetreten")}finally{S(!1)}},U=e=>{T.includes(e)?$(T.filter(a=>a!==e)):$([...T,e])},V=async()=>{if(0===T.length){F("Bitte w\xe4hlen Sie mindestens eine Sperrung aus");return}let e=`M\xf6chten Sie wirklich ${T.length} Sperrung(en) l\xf6schen?`;if(window.confirm(e)){P(!0);try{let e=0,a=0;for(let r of T)try{(await (0,d.NB)(r)).success?e++:a++}catch(e){a++,console.error(`Fehler beim L\xf6schen von Sperrung ${r}:`,e)}e>0?(C(`${e} Sperrung(en) erfolgreich gel\xf6scht${a>0?`, ${a} Fehler`:""}`),await Z(),$([]),c.length===T.length&&B(!1)):F(`Fehler beim L\xf6schen von ${a} Sperrung(en)`)}catch(e){console.error("Fehler beim Bulk-L\xf6schen:",e),F("Ein unerwarteter Fehler beim L\xf6schen ist aufgetreten")}finally{P(!1)}}},M=new Date().toISOString().split("T")[0];return s?(0,t.jsxs)("div",{className:"admin-calendar-management",children:[(0,t.jsxs)("div",{className:"calendar-header",children:[t.jsx("h2",{children:"\uD83D\uDCC5 Kalender-Verwaltung"}),e&&t.jsx("button",{onClick:e,className:"btn-close",children:"âœ•"})]}),(0,t.jsxs)("div",{className:"loading-container",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"â³ Lade Benutzerinformationen..."})]})]}):a?(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c admin-calendar-management",children:[(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c calendar-header",children:[t.jsx("h2",{className:"jsx-8a4a543cdda70c",children:"\uD83D\uDCC5 Kalender-Verwaltung"}),e&&t.jsx("button",{onClick:e,className:"jsx-8a4a543cdda70c btn-close",children:"âœ•"})]}),!1,N&&(0,t.jsxs)("div",{className:`jsx-8a4a543cdda70c alert ${N.includes("Index")?"alert-warning":"alert-error"}`,children:[N.includes("Index")?"âš ï¸":"âŒ"," ",N]}),_&&(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c alert alert-success",children:["\uD83C\uDF89 ",_]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c block-form",children:[t.jsx("h3",{className:"jsx-8a4a543cdda70c",children:"\uD83D\uDEAB Neue Sperrung erstellen"}),("full-day"===m||"time-range"===m)&&(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[t.jsx("label",{htmlFor:"date",className:"jsx-8a4a543cdda70c",children:"Datum:"}),t.jsx("input",{type:"date",id:"date",value:u,min:M,onChange:e=>x(e.target.value),className:"jsx-8a4a543cdda70c form-input"})]}),"date-range"===m&&(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c date-range-inputs",children:[(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c date-range-header",children:[t.jsx("h4",{className:"jsx-8a4a543cdda70c",children:"\uD83D\uDCC5 Datumsbereich ausw\xe4hlen"}),t.jsx("p",{className:"jsx-8a4a543cdda70c help-text",children:"W\xe4hlen Sie den ersten und letzten Tag des Zeitraums"})]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[t.jsx("label",{htmlFor:"start-date",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDDD3ï¸ Startdatum:"}),t.jsx("input",{type:"date",id:"start-date",value:j,min:M,onChange:e=>k(e.target.value),placeholder:"W\xe4hlen Sie das Startdatum",className:"jsx-8a4a543cdda70c form-input"})]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[t.jsx("label",{htmlFor:"end-date",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDDD3ï¸ Enddatum:"}),t.jsx("input",{type:"date",id:"end-date",value:w,min:j||M,onChange:e=>y(e.target.value),placeholder:"W\xe4hlen Sie das Enddatum",className:"jsx-8a4a543cdda70c form-input"})]}),j&&w&&(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c date-range-info",children:[(0,t.jsxs)("span",{className:"jsx-8a4a543cdda70c days-count",children:["\uD83D\uDCC5 ",q(j,w)," Tage werden gesperrt"]}),(0,t.jsxs)("span",{className:"jsx-8a4a543cdda70c date-preview",children:[j," bis ",w]}),q(j,w)>30&&t.jsx("span",{className:"jsx-8a4a543cdda70c warning-text",children:"âš ï¸ L\xe4ngerer Zeitraum - Best\xe4tigung erforderlich"})]})]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[t.jsx("label",{className:"jsx-8a4a543cdda70c",children:"Sperrungstyp:"}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-group",children:[(0,t.jsxs)("label",{className:"jsx-8a4a543cdda70c radio-label",children:[t.jsx("input",{type:"radio",value:"full-day",checked:"full-day"===m,onChange:e=>b(e.target.value),className:"jsx-8a4a543cdda70c"}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-content",children:[t.jsx("span",{className:"jsx-8a4a543cdda70c radio-title",children:"\uD83D\uDCC5 Einzelner Tag"}),t.jsx("span",{className:"jsx-8a4a543cdda70c radio-desc",children:"Einen kompletten Tag sperren"})]})]}),(0,t.jsxs)("label",{className:"jsx-8a4a543cdda70c radio-label",children:[t.jsx("input",{type:"radio",value:"date-range",checked:"date-range"===m,onChange:e=>b(e.target.value),className:"jsx-8a4a543cdda70c"}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-content",children:[t.jsx("span",{className:"jsx-8a4a543cdda70c radio-title",children:"\uD83C\uDFD6ï¸ Mehrere Tage"}),t.jsx("span",{className:"jsx-8a4a543cdda70c radio-desc",children:"Von Datum bis Datum (z.B. Urlaub)"})]})]}),(0,t.jsxs)("label",{className:"jsx-8a4a543cdda70c radio-label",children:[t.jsx("input",{type:"radio",value:"time-range",checked:"time-range"===m,onChange:e=>b(e.target.value),className:"jsx-8a4a543cdda70c"}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-content",children:[t.jsx("span",{className:"jsx-8a4a543cdda70c radio-title",children:"â° Bestimmte Uhrzeiten"}),t.jsx("span",{className:"jsx-8a4a543cdda70c radio-desc",children:"Nur bestimmte Stunden an einem Tag"})]})]})]})]}),"time-range"===m&&(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c time-range-inputs",children:[(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c time-range-header",children:[t.jsx("h4",{className:"jsx-8a4a543cdda70c",children:"â° Uhrzeiten ausw\xe4hlen"}),t.jsx("p",{className:"jsx-8a4a543cdda70c help-text",children:"W\xe4hlen Sie den Zeitraum f\xfcr die Sperrung"})]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[t.jsx("label",{htmlFor:"start-time",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDD50 Von Uhrzeit:"}),(0,t.jsxs)("select",{id:"start-time",value:p||"09:00",onChange:e=>g(e.target.value),className:"jsx-8a4a543cdda70c form-select",children:[t.jsx("option",{value:"",disabled:!0,className:"jsx-8a4a543cdda70c",children:"Startzeit ausw\xe4hlen..."}),I.map(e=>(0,t.jsxs)("option",{value:e,className:"jsx-8a4a543cdda70c",children:[e," Uhr"]},e))]})]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[t.jsx("label",{htmlFor:"end-time",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDD50 Bis Uhrzeit:"}),(0,t.jsxs)("select",{id:"end-time",value:f||"18:00",onChange:e=>h(e.target.value),className:"jsx-8a4a543cdda70c form-select",children:[t.jsx("option",{value:"",disabled:!0,className:"jsx-8a4a543cdda70c",children:"Endzeit ausw\xe4hlen..."}),I.map(e=>(0,t.jsxs)("option",{value:e,className:"jsx-8a4a543cdda70c",children:[e," Uhr"]},e))]})]}),p&&f&&t.jsx("div",{className:"jsx-8a4a543cdda70c time-range-info",children:(0,t.jsxs)("span",{className:"jsx-8a4a543cdda70c time-preview",children:["â° Sperrung: ",p," - ",f," Uhr"]})})]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[t.jsx("label",{htmlFor:"reason",className:"jsx-8a4a543cdda70c",children:"Grund:"}),(0,t.jsxs)("select",{value:v,onChange:e=>z(e.target.value),className:"jsx-8a4a543cdda70c form-select",children:[t.jsx("option",{value:"",className:"jsx-8a4a543cdda70c",children:"Grund ausw\xe4hlen..."}),["Urlaub","Krankheit","Gesch\xe4ftstermin","Wartung","Feiertag","Sonstiges"].map(e=>t.jsx("option",{value:e,className:"jsx-8a4a543cdda70c",children:e},e))]}),t.jsx("input",{type:"text",placeholder:"Oder eigenen Grund eingeben...",value:v,onChange:e=>z(e.target.value),className:"jsx-8a4a543cdda70c form-input mt-2"})]}),t.jsx("button",{onClick:L,disabled:D||!v.trim()||("date-range"===m?!j||!w:!u),className:"jsx-8a4a543cdda70c btn-block",children:D?"â³ Sperrung wird erstellt...":"date-range"===m?`ðŸš« ${j&&w?q(j,w)+" Tage":"Tage"} sperren`:"\uD83D\uDEAB Zeit sperren"})]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c blocked-times-list",children:[(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c blocked-times-header",children:[(0,t.jsxs)("h3",{className:"jsx-8a4a543cdda70c",children:["\uD83D\uDEAB Aktuelle Sperrungen (",c.length,")"]}),c.length>0&&(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c bulk-controls",children:[t.jsx("button",{onClick:()=>{B(!A),$([])},className:`jsx-8a4a543cdda70c btn-bulk-toggle ${A?"active":""}`,children:A?"âœ• Auswahl beenden":"â˜‘ï¸ Mehrfach ausw\xe4hlen"}),A&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("button",{onClick:()=>{$(c.map(e=>e.id).filter(Boolean))},disabled:T.length===c.length,className:"jsx-8a4a543cdda70c btn-bulk-action",children:"âœ… Alle ausw\xe4hlen"}),t.jsx("button",{onClick:()=>{$([])},disabled:0===T.length,className:"jsx-8a4a543cdda70c btn-bulk-action",children:"âŒ Alle abw\xe4hlen"}),t.jsx("button",{onClick:V,disabled:0===T.length||E,className:"jsx-8a4a543cdda70c btn-bulk-delete",children:E?"â³ L\xf6sche...":`ðŸ—‘ï¸ ${T.length} l\xf6schen`})]})]})]}),D&&0===c.length?t.jsx("div",{className:"jsx-8a4a543cdda70c loading",children:"Lade gesperrte Zeiten..."}):0===c.length?t.jsx("div",{className:"jsx-8a4a543cdda70c no-blocks",children:N?.includes("Index")?(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c",children:[t.jsx("p",{className:"jsx-8a4a543cdda70c",children:"âš ï¸ Firebase Index wird erstellt"}),t.jsx("small",{className:"jsx-8a4a543cdda70c",children:"Die Liste wird in wenigen Minuten verf\xfcgbar sein. Sperrungen funktionieren bereits!"})]}):"Keine Sperrungen vorhanden"}):t.jsx("div",{className:"jsx-8a4a543cdda70c blocks-grid",children:c.map(e=>(0,t.jsxs)("div",{className:`jsx-8a4a543cdda70c block-item ${A&&T.includes(e.id||"")?"selected":""}`,children:[(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c block-header",children:[A&&(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c checkbox-container",children:[t.jsx("input",{type:"checkbox",id:`block-${e.id}`,checked:T.includes(e.id||""),onChange:()=>e.id&&U(e.id),className:"jsx-8a4a543cdda70c block-checkbox"}),t.jsx("label",{htmlFor:`block-${e.id}`,className:"jsx-8a4a543cdda70c checkbox-label"})]}),(0,t.jsxs)("span",{className:"jsx-8a4a543cdda70c block-date",children:["\uD83D\uDCC5 ",R(e.date)]}),!A&&t.jsx("button",{onClick:()=>e.id&&G(e.id),title:"Sperrung aufheben",className:"jsx-8a4a543cdda70c btn-unblock",children:"âŒ"})]}),t.jsx("div",{className:"jsx-8a4a543cdda70c block-time",children:e.isFullDay?t.jsx("span",{className:"jsx-8a4a543cdda70c full-day",children:"\uD83D\uDEAB Ganzer Tag"}):(0,t.jsxs)("span",{className:"jsx-8a4a543cdda70c time-range",children:["â° ",e.startTime," - ",e.endTime]})}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c block-reason",children:["\uD83D\uDCAC ",e.reason]}),(0,t.jsxs)("div",{className:"jsx-8a4a543cdda70c block-meta",children:["Erstellt:"," ",e.createdAt.toDate().toLocaleDateString("de-DE")]})]},e.id))})]}),t.jsx(n(),{id:"8a4a543cdda70c",children:'.admin-calendar-management.jsx-8a4a543cdda70c{max-width:1e3px;margin:0 auto;padding:20px;background:#fff;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;-webkit-box-shadow:0 4px 6px rgba(0,0,0,.1);-moz-box-shadow:0 4px 6px rgba(0,0,0,.1);box-shadow:0 4px 6px rgba(0,0,0,.1)}.calendar-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid#e5e7eb}.calendar-header.jsx-8a4a543cdda70c h2.jsx-8a4a543cdda70c{margin:0;color:#1f2937;font-size:1.8rem}.btn-close.jsx-8a4a543cdda70c{background:#ef4444;color:white;border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:40px;height:40px;cursor:pointer;font-size:1.2rem}.loading-container.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:60px 20px;text-align:center}.loading-spinner.jsx-8a4a543cdda70c{width:40px;height:40px;border:4px solid#e5e7eb;border-top:4px solid#3b82f6;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin-bottom:20px}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.debug-info.jsx-8a4a543cdda70c{padding:8px 12px;background:#f3f4f6;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin-bottom:15px;font-family:monospace;font-size:12px;color:#6b7280}.alert.jsx-8a4a543cdda70c{padding:12px 16px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;margin-bottom:20px;font-weight:500}.alert-error.jsx-8a4a543cdda70c{background:#fef2f2;color:#dc2626;border:1px solid#fecaca}.alert-warning.jsx-8a4a543cdda70c{background:#fffbeb;color:#d97706;border:1px solid#fed7aa}.alert-success.jsx-8a4a543cdda70c{background:#f0fdf4;color:#16a34a;border:2px solid#22c55e;-webkit-box-shadow:0 4px 12px rgba(34,197,94,.15);-moz-box-shadow:0 4px 12px rgba(34,197,94,.15);box-shadow:0 4px 12px rgba(34,197,94,.15);font-weight:600;-webkit-animation:successFadeIn.3s ease-out;-moz-animation:successFadeIn.3s ease-out;-o-animation:successFadeIn.3s ease-out;animation:successFadeIn.3s ease-out}@-webkit-keyframes successFadeIn{from{opacity:0;-webkit-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes successFadeIn{from{opacity:0;-moz-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes successFadeIn{from{opacity:0;-o-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes successFadeIn{from{opacity:0;-webkit-transform:translatey(-10px);-moz-transform:translatey(-10px);-o-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.block-form.jsx-8a4a543cdda70c{background:#f9fafb;padding:25px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;margin-bottom:30px}.block-form.jsx-8a4a543cdda70c h3.jsx-8a4a543cdda70c{margin:0 0 20px 0;color:#374151}.form-group.jsx-8a4a543cdda70c{margin-bottom:20px}.form-group.jsx-8a4a543cdda70c label.jsx-8a4a543cdda70c{display:block;margin-bottom:6px;font-weight:600;color:#374151}.form-input.jsx-8a4a543cdda70c,.form-select.jsx-8a4a543cdda70c{width:100%;padding:10px 12px;border:1px solid#d1d5db;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;-webkit-transition:border-color.2s;-moz-transition:border-color.2s;-o-transition:border-color.2s;transition:border-color.2s}.form-input.jsx-8a4a543cdda70c:focus,.form-select.jsx-8a4a543cdda70c:focus{outline:none;border-color:#3b82f6;-webkit-box-shadow:0 0 0 3px rgba(59,130,246,.1);-moz-box-shadow:0 0 0 3px rgba(59,130,246,.1);box-shadow:0 0 0 3px rgba(59,130,246,.1)}.radio-group.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:20px}.radio-label.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:12px;cursor:pointer;font-weight:normal;padding:12px;border:1px solid#e5e7eb;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;margin-bottom:8px}.radio-label.jsx-8a4a543cdda70c:hover{background:#f9fafb;border-color:#d1d5db}.radio-label.jsx-8a4a543cdda70c input[type="radio"].jsx-8a4a543cdda70c:checked+.radio-content.jsx-8a4a543cdda70c{color:#1e40af}.radio-label.jsx-8a4a543cdda70c input[type="radio"].jsx-8a4a543cdda70c:checked{accent-color:#3b82f6}.radio-content.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:4px}.radio-title.jsx-8a4a543cdda70c{font-weight:600;font-size:14px}.radio-desc.jsx-8a4a543cdda70c{font-size:12px;color:#6b7280;font-style:italic}.time-range-inputs.jsx-8a4a543cdda70c{margin-bottom:20px}.time-range-header.jsx-8a4a543cdda70c{margin-bottom:15px;padding:15px;background:#fef3f2;border:1px solid#fed7d7;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.time-range-header.jsx-8a4a543cdda70c h4.jsx-8a4a543cdda70c{margin:0 0 8px 0;color:#1e293b;font-size:16px}.time-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{display:inline-block;width:-webkit-calc(50% - 10px);width:-moz-calc(50% - 10px);width:calc(50% - 10px);margin-right:20px;vertical-align:top}.time-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c:last-of-type{margin-right:0}.time-range-info.jsx-8a4a543cdda70c{margin-top:15px;padding:12px;background:#fff7ed;border:1px solid#fed7aa;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;text-align:center}.time-preview.jsx-8a4a543cdda70c{color:#ea580c;font-weight:600;font-size:14px}.date-range-inputs.jsx-8a4a543cdda70c{margin-bottom:20px}.date-range-header.jsx-8a4a543cdda70c{grid-column:1/-1;margin-bottom:15px;padding:15px;background:#f8fafc;border:1px solid#e2e8f0;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.date-range-header.jsx-8a4a543cdda70c h4.jsx-8a4a543cdda70c{margin:0 0 8px 0;color:#1e293b;font-size:16px}.help-text.jsx-8a4a543cdda70c{margin:0;color:#64748b;font-size:14px;font-style:italic}.date-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{display:inline-block;width:-webkit-calc(50% - 10px);width:-moz-calc(50% - 10px);width:calc(50% - 10px);margin-right:20px;vertical-align:top}.date-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c:last-of-type{margin-right:0}.date-range-info.jsx-8a4a543cdda70c{margin-top:15px;padding:15px;background:#f0f9ff;border:1px solid#bfdbfe;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;text-align:center}.days-count.jsx-8a4a543cdda70c{display:block;font-weight:600;color:#1e40af;margin-bottom:8px;font-size:16px}.date-preview.jsx-8a4a543cdda70c{display:block;color:#374151;font-size:14px;margin-bottom:8px}.warning-text.jsx-8a4a543cdda70c{display:block;font-size:12px;color:#d97706;font-weight:500}.btn-block.jsx-8a4a543cdda70c{background:#dc2626;color:white;border:none;padding:12px 24px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-weight:600;cursor:pointer;font-size:16px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.btn-block.jsx-8a4a543cdda70c:hover:not(:disabled){background:#b91c1c}.btn-block.jsx-8a4a543cdda70c:disabled{background:#9ca3af;cursor:not-allowed}.blocked-times-list.jsx-8a4a543cdda70c h3.jsx-8a4a543cdda70c{color:#374151;margin-bottom:20px}.blocks-grid.jsx-8a4a543cdda70c{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.block-item.jsx-8a4a543cdda70c{background:#fff;border:1px solid#e5e7eb;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:15px;-webkit-transition:box-shadow.2s;-moz-transition:box-shadow.2s;-o-transition:box-shadow.2s;transition:box-shadow.2s}.block-item.jsx-8a4a543cdda70c:hover{-webkit-box-shadow:0 4px 6px rgba(0,0,0,.1);-moz-box-shadow:0 4px 6px rgba(0,0,0,.1);box-shadow:0 4px 6px rgba(0,0,0,.1)}.block-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px}.block-date.jsx-8a4a543cdda70c{font-weight:600;color:#1f2937}.btn-unblock.jsx-8a4a543cdda70c{background:none;border:none;font-size:16px;cursor:pointer;padding:4px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.btn-unblock.jsx-8a4a543cdda70c:hover{background:#fee2e2}.block-time.jsx-8a4a543cdda70c{margin-bottom:8px}.full-day.jsx-8a4a543cdda70c{color:#dc2626;font-weight:600}.time-range.jsx-8a4a543cdda70c{color:#059669;font-weight:600}.block-reason.jsx-8a4a543cdda70c{color:#6b7280;margin-bottom:8px}.block-meta.jsx-8a4a543cdda70c{font-size:12px;color:#9ca3af}.loading.jsx-8a4a543cdda70c,.no-blocks.jsx-8a4a543cdda70c{text-align:center;color:#6b7280;padding:40px;font-style:italic}.mt-2.jsx-8a4a543cdda70c{margin-top:8px}.blocked-times-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:15px}.bulk-controls.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.btn-bulk-toggle.jsx-8a4a543cdda70c{background:#f3f4f6;border:1px solid#d1d5db;color:#374151;padding:8px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;font-weight:500}.btn-bulk-toggle.jsx-8a4a543cdda70c:hover{background:#e5e7eb}.btn-bulk-toggle.active.jsx-8a4a543cdda70c{background:#3b82f6;color:white;border-color:#3b82f6}.btn-bulk-action.jsx-8a4a543cdda70c{background:#f9fafb;border:1px solid#d1d5db;color:#6b7280;padding:6px 12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:13px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.btn-bulk-action.jsx-8a4a543cdda70c:hover:not(:disabled){background:#f3f4f6;color:#374151}.btn-bulk-action.jsx-8a4a543cdda70c:disabled{opacity:.5;cursor:not-allowed}.btn-bulk-delete.jsx-8a4a543cdda70c{background:#dc2626;border:1px solid#dc2626;color:white;padding:6px 12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:13px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;font-weight:500}.btn-bulk-delete.jsx-8a4a543cdda70c:hover:not(:disabled){background:#b91c1c;border-color:#b91c1c}.btn-bulk-delete.jsx-8a4a543cdda70c:disabled{opacity:.5;cursor:not-allowed}.block-item.selected.jsx-8a4a543cdda70c{border-color:#3b82f6;background:#eff6ff;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 4px 12px rgba(59,130,246,.15);-moz-box-shadow:0 4px 12px rgba(59,130,246,.15);box-shadow:0 4px 12px rgba(59,130,246,.15)}.checkbox-container.jsx-8a4a543cdda70c{position:relative;margin-right:12px}.block-checkbox.jsx-8a4a543cdda70c{width:18px;height:18px;accent-color:#3b82f6;cursor:pointer}.checkbox-label.jsx-8a4a543cdda70c{cursor:pointer}.block-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px}.block-date.jsx-8a4a543cdda70c{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;font-weight:600;color:#1f2937}@media(max-width:768px){.blocked-times-header.jsx-8a4a543cdda70c{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.bulk-controls.jsx-8a4a543cdda70c{-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.radio-group.jsx-8a4a543cdda70c{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}.time-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{width:100%;margin-right:0;margin-bottom:15px}.date-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{width:100%;margin-right:0;margin-bottom:15px}.blocks-grid.jsx-8a4a543cdda70c{grid-template-columns:1fr}}'})]}):(0,t.jsxs)("div",{className:"admin-calendar-management",children:[(0,t.jsxs)("div",{className:"calendar-header",children:[t.jsx("h2",{children:"\uD83D\uDCC5 Kalender-Verwaltung"}),e&&t.jsx("button",{onClick:e,className:"btn-close",children:"âœ•"})]}),t.jsx("div",{className:"alert alert-error",children:"âŒ Sie sind nicht angemeldet. Bitte laden Sie die Seite neu oder melden Sie sich erneut an."})]})}function l(){let e=(0,o.useRouter)(),[a,r]=(0,i.useState)(!1),[s,d]=(0,i.useState)(!0);return s?(0,t.jsxs)("div",{className:"admin-loading",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"\xdcberpr\xfcfe Berechtigung..."})]}):a?(0,t.jsxs)("div",{className:"jsx-b79edc273ccbf3a admin-calendar-page",children:[t.jsx("div",{className:"jsx-b79edc273ccbf3a admin-nav",children:t.jsx("button",{onClick:()=>e.push("/admin"),className:"jsx-b79edc273ccbf3a btn-back",children:"â† Zur\xfcck zum Admin Dashboard"})}),t.jsx("main",{className:"jsx-b79edc273ccbf3a calendar-main",children:t.jsx(c,{})}),t.jsx(n(),{id:"b79edc273ccbf3a",children:".admin-calendar-page.jsx-b79edc273ccbf3a{min-height:100vh;background:#f3f4f6;padding:20px}.admin-nav.jsx-b79edc273ccbf3a{max-width:1e3px;margin:0 auto 20px auto}.btn-back.jsx-b79edc273ccbf3a{background:#6b7280;color:white;border:none;padding:10px 20px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;font-size:14px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.btn-back.jsx-b79edc273ccbf3a:hover{background:#4b5563}.calendar-main.jsx-b79edc273ccbf3a{max-width:1e3px;margin:0 auto}.admin-loading.jsx-b79edc273ccbf3a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-height:100vh;gap:20px}.loading-spinner.jsx-b79edc273ccbf3a{width:40px;height:40px;border:4px solid#e5e7eb;border-top:4px solid#3b82f6;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):null}},4293:(e,a,r)=>{"use strict";r.d(a,{IJ:()=>i,N0:()=>x,NB:()=>d,VR:()=>o,g4:()=>l,getBlockedTimesForDate:()=>c,hS:()=>b,isTimeSlotBlocked:()=>u,wi:()=>n});var t=r(76),s=r(5920);async function n(e,a,r,n){try{console.log(`ðŸš« Sperre Datumsbereich: ${e} bis ${a} - Grund: ${r}`);let i=new Date(e),o=new Date(a);if(i>o)return{success:!1,error:"Startdatum muss vor Enddatum liegen"};let d=Math.ceil((o.getTime()-i.getTime())/864e5)+1;if(d>365)return{success:!1,error:"Maximal 365 Tage k\xf6nnen gleichzeitig gesperrt werden"};let l=0,u=0,x=[],m=new Date(i);for(;m<=o;){let e=m.toISOString().split("T")[0],a=await c(e);if(a.find(e=>e.isFullDay))console.log(`âš ï¸ Tag ${e} bereits gesperrt - \xfcberspringe`),u++,x.push(`${e} bereits gesperrt`);else{for(let e of a)!e.isFullDay&&e.id&&await (0,t.oe)((0,t.doc)(s.db,"blocked_times",e.id));await (0,t.ET)((0,t.hJ)(s.db,"blocked_times"),{date:e,isFullDay:!0,reason:r,createdAt:t.Timestamp.now(),createdBy:n}),l++,console.log(`âœ… Tag ${e} erfolgreich gesperrt`)}m.setDate(m.getDate()+1)}if(0===l)return{success:!1,error:`Alle ${d} Tage waren bereits gesperrt`,blockedDays:0};if(u>0)return{success:!0,error:`${l}/${d} Tage gesperrt. ${u} bereits gesperrt: ${x.slice(0,3).join(", ")}${x.length>3?"...":""}`,blockedDays:l};return{success:!0,blockedDays:l}}catch(e){return console.error("âŒ Fehler beim Sperren des Datumsbereichs:",e),{success:!1,error:"Fehler beim Sperren des Datumsbereichs"}}}async function i(e,a,r){try{console.log(`ðŸš« Sperre ganzen Tag: ${e} - Grund: ${a}`);let n=await c(e);if(n.find(e=>e.isFullDay))return{success:!1,error:"Dieser Tag ist bereits vollst\xe4ndig gesperrt"};for(let e of n)!e.isFullDay&&e.id&&await (0,t.oe)((0,t.doc)(s.db,"blocked_times",e.id));return await (0,t.ET)((0,t.hJ)(s.db,"blocked_times"),{date:e,isFullDay:!0,reason:a,createdAt:t.Timestamp.now(),createdBy:r}),console.log(`âœ… Ganzer Tag erfolgreich gesperrt: ${e}`),{success:!0}}catch(e){return console.error("âŒ Fehler beim Sperren des ganzen Tags:",e),{success:!1,error:"Fehler beim Sperren des Tages"}}}async function o(e,a,r,n,i){try{console.log(`ðŸš« Sperre Zeitraum: ${e} ${a}-${r} - Grund: ${n}`);let o=await c(e);if(o.find(e=>e.isFullDay))return{success:!1,error:"Dieser Tag ist bereits vollst\xe4ndig gesperrt"};if(o.some(e=>{if(e.isFullDay||!e.startTime||!e.endTime)return!1;let t=m(e.startTime),s=m(e.endTime),n=m(a),i=m(r);return n<s&&i>t}))return{success:!1,error:"Zeitraum \xfcberschneidet sich mit bestehender Sperrung"};return await (0,t.ET)((0,t.hJ)(s.db,"blocked_times"),{date:e,startTime:a,endTime:r,isFullDay:!1,reason:n,createdAt:t.Timestamp.now(),createdBy:i}),console.log(`âœ… Zeitraum erfolgreich gesperrt: ${e} ${a}-${r}`),{success:!0}}catch(e){return console.error("âŒ Fehler beim Sperren des Zeitraums:",e),{success:!1,error:"Fehler beim Sperren des Zeitraums"}}}async function d(e){try{return console.log(`âœ… Hebe Sperrung auf: ${e}`),await (0,t.oe)((0,t.doc)(s.db,"blocked_times",e)),console.log(`âœ… Sperrung erfolgreich aufgehoben: ${e}`),{success:!0}}catch(e){return console.error("âŒ Fehler beim Aufheben der Sperrung:",e),{success:!1,error:"Fehler beim Aufheben der Sperrung"}}}async function c(e){try{let a=(0,t.IO)((0,t.hJ)(s.db,"blocked_times"),(0,t.ar)("date","==",e)),r=await (0,t.PL)(a),n=[];return r.forEach(e=>{n.push({id:e.id,...e.data()})}),n.sort((e,a)=>{let r=e.createdAt?.toDate?.()?.getTime()||0;return(a.createdAt?.toDate?.()?.getTime()||0)-r}),n}catch(a){if(console.error("âŒ Fehler beim Abrufen der gesperrten Zeiten:",a),a.message?.includes("index")){console.warn("âš ï¸ Firebase Index wird ben\xf6tigt. Verwende einfache Abfrage...");try{let a=await (0,t.PL)((0,t.hJ)(s.db,"blocked_times")),r=[];return a.forEach(a=>{let t={id:a.id,...a.data()};t.date===e&&r.push(t)}),r}catch(e){console.error("âŒ Auch Fallback-Abfrage fehlgeschlagen:",e)}}return[]}}async function l(e,a){try{let r=(0,t.IO)((0,t.hJ)(s.db,"blocked_times"),(0,t.ar)("date",">=",e),(0,t.ar)("date","<=",a)),n=await (0,t.PL)(r),i=[];return n.forEach(e=>{i.push({id:e.id,...e.data()})}),i.sort((e,a)=>{if(e.date!==a.date)return e.date.localeCompare(a.date);let r=e.createdAt?.toDate?.()?.getTime()||0;return(a.createdAt?.toDate?.()?.getTime()||0)-r}),i}catch(r){if(console.error("âŒ Fehler beim Abrufen der gesperrten Zeiten f\xfcr Bereich:",r),r.message?.includes("index")){console.warn("âš ï¸ Firebase Index wird ben\xf6tigt. Verwende Fallback...");try{let r=await (0,t.PL)((0,t.hJ)(s.db,"blocked_times")),n=[];return r.forEach(r=>{let t={id:r.id,...r.data()};t.date>=e&&t.date<=a&&n.push(t)}),n}catch(e){console.error("âŒ Fallback-Abfrage fehlgeschlagen:",e)}}return[]}}async function u(e,a){try{let r=await c(e);if(r.some(e=>e.isFullDay))return!0;let t=m(a);return r.some(e=>{if(e.isFullDay||!e.startTime||!e.endTime)return!1;let a=m(e.startTime),r=m(e.endTime);return t>=a&&t<r})}catch(e){return console.error("âŒ Fehler beim Pr\xfcfen der Zeitslot-Sperrung:",e),!1}}async function x(e){try{return(await c(e)).some(e=>e.isFullDay)}catch(e){return console.error("âŒ Fehler beim Pr\xfcfen der Ganztags-Sperrung:",e),!1}}function m(e){let[a,r]=e.split(":").map(Number);return 60*a+r}async function b(){try{console.log("\uD83D\uDCCB Lade alle gesperrten Zeiten...");let e=await (0,t.PL)((0,t.hJ)(s.db,"blocked_times")),a=[];return e.forEach(e=>{a.push({id:e.id,...e.data()})}),console.log(`ðŸ“‹ ${a.length} gesperrte Zeiten gefunden, sortiere manuell...`),a.sort((e,a)=>{if(e.date!==a.date)return e.date.localeCompare(a.date);let r=e.createdAt?.toDate?.()?.getTime()||0;return(a.createdAt?.toDate?.()?.getTime()||0)-r}),console.log(`âœ… Alle gesperrten Zeiten sortiert: ${a.length} Eintr\xe4ge`),a}catch(e){return console.error("âŒ Fehler beim Abrufen aller gesperrten Zeiten:",e),e.message?.includes("index")&&(console.warn("âš ï¸ Firebase Index-Problem erkannt. Das ist normal beim ersten Mal."),console.info("\uD83D\uDCA1 Firebase erstellt automatisch Indizes im Hintergrund. Bitte warten Sie einige Minuten.")),[]}}},4410:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(8570).createProxy)(String.raw`/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/admin/calendar/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[628,46,187,920],()=>r(2422));module.exports=t})();