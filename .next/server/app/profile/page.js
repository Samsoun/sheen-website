(()=>{var e={};e.id=178,e.ids=[178],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4705:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>d,routeModule:()=>u,tree:()=>c}),t(5282),t(7919),t(5866);var r=t(3191),n=t(8716),i=t(7922),l=t.n(i),a=t(5231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);t.d(s,o);let c=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5282)),"/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7919)),"/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/profile/page.tsx"],h="/profile/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3339:(e,s,t)=>{Promise.resolve().then(t.bind(t,694))},694:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(326),n=t(7577),i=t(5047),l=t(6226),a=t(5920),o=t(1037);t(4856);var c=t(434),d=t(76),h=t(6967),x=t(4419);function u(){let[e,s]=(0,n.useState)(null),[t,u]=(0,n.useState)(null),[m,g]=(0,n.useState)(!0),[p,j]=(0,n.useState)(!1),[b,f]=(0,n.useState)({}),[N,w]=(0,n.useState)(null),[v,k]=(0,n.useState)(null),[y,B]=(0,n.useState)(null),[S,L]=(0,n.useState)(null),[C,D]=(0,n.useState)(!1),[F,T]=(0,n.useState)({}),[P,E]=(0,n.useState)({past:[],upcoming:[],totalCount:0}),[z,M]=(0,n.useState)("profile"),q=(0,n.useRef)(null),W=(0,i.useRouter)(),[A,R]=(0,n.useState)(!1),[$,V]=(0,n.useState)(null),[H,_]=(0,n.useState)(""),[I,G]=(0,n.useState)(null),[U,Z]=(0,n.useState)(null),[K,O]=(0,n.useState)(!1),J=e=>{if(!e)return"";try{let[s,t,r]=e.split("-");if(!s||!t||!r)return console.error("Ung\xfcltiges Datumsformat:",e),e;return`${r}.${t}.${s}`}catch(s){return console.error("Fehler beim Formatieren des Datums:",s),e}},X=async()=>{try{console.log("=========== BUCHUNGEN ABRUFEN START ==========="),new Date().setHours(0,0,0,0);let s=a.I8.currentUser;if(!s){console.error("Kein Benutzer angemeldet");return}console.log("Suche Buchungen f\xfcr:",{uid:s.uid,email:s.email});let t=(0,d.hJ)(a.db,"bookings"),r=(0,d.IO)(t,(0,d.ar)("email","==",s.email)),n=await (0,d.PL)(r);console.log(`Gefunden: ${n.size} Buchungen f\xfcr E-Mail ${s.email}`);let i=new Map;n.forEach(e=>{let s={id:e.id,...e.data()},t=e.id;i.has(t)||(i.set(t,s),console.log("Neue Buchung gefunden:",{id:e.id,date:s.date,time:s.time,service:s.serviceName,email:s.email,status:s.status}))}),console.log(`Insgesamt ${i.size} eindeutige Buchungen gefunden`);let l=[],o=[];i.forEach(e=>{let[s,t,r]=e.date.split("-").map(Number),n=new Date(s,t-1,r,12,0,0),i=new Date;i.setHours(12,0,0,0),n<i?(l.push(e),console.log("Vergangene Buchung:",e.date,e.serviceName)):(o.push(e),console.log("Zuk\xfcnftige Buchung:",e.date,e.serviceName))}),l.sort((e,s)=>{let[t,r,n]=e.date.split("-").map(Number),[i,l,a]=s.date.split("-").map(Number),o=new Date(t,r-1,n,12,0,0);return new Date(i,l-1,a,12,0,0).getTime()-o.getTime()}),o.sort((e,s)=>{let[t,r,n]=e.date.split("-").map(Number),[i,l,a]=s.date.split("-").map(Number),o=new Date(t,r-1,n,12,0,0),c=new Date(i,l-1,a,12,0,0);return o.getTime()-c.getTime()}),console.log(`Gefunden: ${l.length} vergangene und ${o.length} zuk\xfcnftige Buchungen`),E({past:l,upcoming:o,totalCount:i.size}),e&&await Q(),g(!1)}catch(e){console.error("Fehler beim Abrufen der Buchungen:",e),g(!1)}},Q=async()=>{if(e)try{O(!0);let s=await (0,x.Gf)(e.uid);if(G(s),t?.birthdate){let s=await (0,x.h1)(e.uid);Z(s)}}catch(e){console.error("Fehler beim Laden der Rabattdaten:",e)}finally{O(!1)}},Y=e=>{let{name:s,value:t}=e.target;("firstName"===s||"lastName"===s)&&(/^[a-zA-ZäöüÄÖÜß\s\-]*$/.test(t)?T(e=>{let t={...e};return delete t[s],t}):T(e=>({...e,[s]:"Bitte nur Buchstaben eingeben"}))),"phone"===s&&(/^[0-9\+\s]*$/.test(t)?T(e=>{let t={...e};return delete t[s],t}):T(e=>({...e,[s]:"Bitte nur Zahlen eingeben"}))),f(e=>({...e,[s]:t}))},ee=async()=>{if(e){B(null),L(null);try{let s=await (0,a.Oy)(e.uid);if(!s.success){B(s.error||"Fehler beim L\xf6schen des Profilbilds.");return}w(null),k(null);let t=await (0,a.Rf)(e.uid);u(t),L("Profilbild erfolgreich gel\xf6scht!")}catch(e){B("Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut."),console.error("Fehler beim L\xf6schen des Profilbilds:",e)}}},es=async()=>{if(e){if(B(null),L(null),Object.keys(F).length>0){B("Bitte korrigieren Sie die Eingabefehler, bevor Sie speichern.");return}try{if(Object.keys(b).length>0){console.log("Aktualisiere Kundendaten:",b);let s=await (0,a.mU)(e.uid,b);if(!s.success){B(s.error||"Fehler beim Aktualisieren der Daten.");return}}if(N){console.log("Lade Profilbild hoch");let s=await (0,a._p)(e.uid,N);if(!s.success){B("Daten wurden aktualisiert, aber das Profilbild konnte nicht hochgeladen werden.");return}k(s.url||null)}console.log("Lade aktualisierte Kundendaten");let s=await (0,a.Rf)(e.uid);u(s),L("Profil erfolgreich aktualisiert!"),j(!1)}catch(e){console.error("Fehler beim Aktualisieren des Profils:",e),B("Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}}},et=async()=>{try{await (0,a.$1)(),W.push("/")}catch(e){console.error("Fehler beim Abmelden:",e)}},er=async()=>{if(e){if(B(null),L(null),C)try{let s=await (0,a.rl)(e.uid);if(!s.success){B(s.error||"Fehler beim L\xf6schen des Kontos.");return}W.push("/")}catch(e){B("Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut."),console.error("Fehler beim L\xf6schen des Kontos:",e)}finally{D(!1)}else D(!0)}},en=async e=>{if(!(0,h.m1)(e.date,e.time)){V(e),_("Buchungen k\xf6nnen nur bis 24 Stunden vor dem Termin storniert werden."),R(!0);return}V(e),_(""),R(!0)},ei=async()=>{if($)try{let s="cancelled"===$.status;if(await (0,h.i1)($.id,"cancelled")){if(s)try{console.log("\uD83E\uDDEA TEST: Behandlungsz\xe4hler-Reduktion f\xfcr bereits stornierte Buchung:",$.id),await (0,x.HZ)($.id),console.log("✅ TEST: Behandlungsz\xe4hler-Reduktion getestet")}catch(e){console.error("❌ TEST: Fehler beim Testen der Z\xe4hler-Reduktion:",e)}else try{console.log("\uD83D\uDD3B Reduziere Behandlungsz\xe4hler f\xfcr neu stornierte Buchung:",$.id),await (0,x.HZ)($.id),console.log("✅ Behandlungsz\xe4hler erfolgreich reduziert")}catch(e){console.error("❌ Fehler beim Reduzieren des Z\xe4hlers:",e)}if(e?.uid)try{console.log("\uD83D\uDD04 Starte Neuberechnung nach Stornierung..."),await (0,x.f6)(e.uid),console.log("✅ Neuberechnung abgeschlossen")}catch(e){console.error("❌ Fehler bei der Neuberechnung:",e)}if(await X(),e?.uid)try{let s=await (0,x.Gf)(e.uid);G(s)}catch(e){console.error("Fehler beim Neuladen des Loyalty-Fortschritts:",e)}R(!1),V(null),_("")}else _("Die Buchung konnte nicht storniert werden. Bitte versuchen Sie es sp\xe4ter erneut.")}catch(e){console.error("Fehler beim Stornieren der Buchung:",e),_("Ein Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}},el=(e,s)=>{let t=(0,o.jE)(e.price);return(0,r.jsxs)("div",{className:"booking-item p-6 bg-white rounded-lg shadow-sm mb-4",children:[(0,r.jsxs)("div",{className:"booking-card-header",children:[(0,r.jsxs)("div",{className:"booking-date-time",children:[(0,r.jsxs)("div",{className:"booking-date flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),J(e.date)]}),(0,r.jsxs)("div",{className:"booking-time flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.time," Uhr"]})]}),r.jsx("div",{className:"booking-status",children:r.jsx("span",{className:`status-badge ${"confirmed"===e.status?"status-confirmed":"cancelled"===e.status?"status-cancelled":"status-pending"}`,children:"confirmed"===e.status?"Best\xe4tigt":"cancelled"===e.status?"Storniert":"Ausstehend"})})]}),(0,r.jsxs)("div",{className:"booking-details",children:[r.jsx("div",{className:"booking-treatments",children:e.treatments&&e.treatments.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h4",{className:"booking-service-title flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"}),r.jsx("line",{x1:"16",y1:"8",x2:"2",y2:"22"}),r.jsx("line",{x1:"17.5",y1:"15",x2:"9",y2:"15"})]}),"Behandlung:"]}),r.jsx("ul",{className:"booking-treatments-list",children:e.treatments.map((s,t)=>(0,r.jsxs)("li",{className:"booking-treatment-item",children:[r.jsx("span",{className:"treatment-name",children:s.name}),(0,r.jsxs)("span",{className:"treatment-duration flex items-center gap-1",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]}),s.duration," Min."]})]},`${e.id}-${s.id}-${t}`))})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h4",{className:"booking-service-title flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"}),r.jsx("line",{x1:"16",y1:"8",x2:"2",y2:"22"}),r.jsx("line",{x1:"17.5",y1:"15",x2:"9",y2:"15"})]}),"Behandlung:"]}),r.jsx("div",{className:"booking-service-name",children:e.serviceName})]})}),(0,r.jsxs)("div",{className:"booking-price-duration",children:[(0,r.jsxs)("div",{className:"booking-price flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-[#28a745] font-semibold",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),r.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),t.grossFormatted]}),(0,r.jsxs)("div",{className:"price-details text-xs text-gray-500 mt-1",children:[(0,r.jsxs)("div",{children:["Netto: ",t.netFormatted]}),(0,r.jsxs)("div",{children:["MwSt (19%): ",t.vatFormatted]})]})]}),(0,r.jsxs)("div",{className:"booking-duration flex items-center gap-1 text-gray-600",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.duration," Min."]})]})]}),r.jsx("div",{className:"booking-actions",children:"cancelled"===e.status?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-500 text-sm font-medium",children:"✅ BEREITS STORNIERT"}),(0,r.jsxs)("button",{onClick:()=>en(e),className:"btn-cancel-booking flex items-center gap-1 opacity-60",title:"TEST: Z\xe4hler-Reduktion bei bereits stornierten Buchungen",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"TEST: Z\xe4hler reduzieren"]})]}):s?null:(0,r.jsxs)("button",{onClick:()=>en(e),className:"btn-cancel-booking flex items-center gap-1",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Termin stornieren"]})})]})};return m?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center py-20",children:[r.jsx("div",{className:"w-24 h-24 relative",children:(0,r.jsxs)("svg",{className:"animate-spin w-full h-full text-b2d8db",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"#b2d8db",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"#b2d8db",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r.jsx("p",{className:"mt-8 text-2xl text-gray-600 font-medium",children:"Daten werden geladen..."})]}):e&&t?(0,r.jsxs)("div",{className:"profile-card relative",children:[y&&(0,r.jsxs)("div",{className:"form-feedback error",children:[r.jsx("strong",{children:"Fehler:"})," ",y]}),S&&(0,r.jsxs)("div",{className:"form-feedback success",children:[r.jsx("strong",{children:"Erfolg!"})," ",S]}),C&&(0,r.jsxs)("div",{className:"delete-warning",children:[r.jsx("h3",{className:"delete-warning-title",children:"Warnung: Konto l\xf6schen?"}),r.jsx("p",{className:"delete-warning-text",children:"Wenn Sie Ihr Konto l\xf6schen, gehen alle Ihre pers\xf6nlichen Daten unwiderruflich verloren."}),(0,r.jsxs)("div",{className:"delete-warning-buttons",children:[r.jsx("button",{onClick:er,className:"btn--danger",children:"Konto endg\xfcltig l\xf6schen"}),r.jsx("button",{onClick:()=>{D(!1)},className:"btn--cancel",children:"Abbrechen"})]})]}),(0,r.jsxs)("div",{className:"profile-tabs",children:[(0,r.jsxs)("button",{className:`profile-tab ${"profile"===z?"active":""}`,onClick:()=>M("profile"),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Mein Profil"]}),(0,r.jsxs)("button",{className:`profile-tab ${"bookings"===z?"active":""}`,onClick:()=>M("bookings"),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Meine Buchungen",P.totalCount>0&&r.jsx("span",{className:"booking-count",children:P.totalCount})]})]}),"profile"===z?r.jsx("div",{className:"profile-content bg-white rounded-b-lg",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,r.jsxs)("div",{className:"profile-image-container",children:[r.jsx("div",{className:"profile-image relative rounded-full overflow-hidden shadow-md border-4 border-[#e8f3f4]",children:v?r.jsx(l.default,{src:v,alt:"Profilbild",fill:!0,style:{objectFit:"cover"}}):r.jsx("div",{className:"w-full h-full bg-[#e8f3f4] flex items-center justify-center rounded-full",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-24 w-24 md:h-32 md:w-32 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})}),p&&(0,r.jsxs)("div",{className:"w-full mt-4 flex flex-col gap-2",children:[r.jsx("button",{type:"button",onClick:()=>q.current?.click(),className:"btn--edit w-full",children:"Profilbild \xe4ndern"}),v&&r.jsx("button",{type:"button",onClick:ee,className:"btn--logout w-full",children:"Profilbild entfernen"}),r.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0];w(s);let t=new FileReader;t.onload=e=>{e.target&&"string"==typeof e.target.result&&k(e.target.result)},t.readAsDataURL(s)}},className:"hidden"})]}),(0,r.jsxs)("div",{className:"text-center mt-6 mb-4",children:[(0,r.jsxs)("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:[t?.firstName," ",t?.lastName]}),(0,r.jsxs)("p",{className:"text-base text-gray-600 flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 20 20",fill:"currentColor",children:[r.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),r.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),t?.email]})]}),(0,r.jsxs)("div",{className:"w-full mt-8",children:[r.jsx("button",{onClick:et,className:"btn--logout w-full",children:"Abmelden"}),r.jsx("button",{onClick:er,className:"btn--delete w-full mt-4",children:"Konto l\xf6schen"})]})]}),(0,r.jsxs)("div",{className:"profile-details bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[r.jsx("h3",{className:"profile-details-title",children:"Pers\xf6nliche Daten"}),r.jsx("div",{className:"profile-details-content",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"profile-details-grid",children:[(0,r.jsxs)("div",{className:"profile-detail-item",children:[r.jsx("label",{htmlFor:"firstName",className:"block text-base md:text-lg font-medium text-gray-700 mb-2",children:"Vorname"}),r.jsx("input",{id:"firstName",name:"firstName",type:"text",value:b.firstName||"",onChange:Y,className:`login-input ${F.firstName?"border-red-500":""}`}),F.firstName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:F.firstName})]}),(0,r.jsxs)("div",{className:"profile-detail-item",children:[r.jsx("label",{htmlFor:"lastName",className:"block text-base md:text-lg font-medium text-gray-700 mb-2",children:"Nachname"}),r.jsx("input",{id:"lastName",name:"lastName",type:"text",value:b.lastName||"",onChange:Y,className:`login-input ${F.lastName?"border-red-500":""}`}),F.lastName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:F.lastName})]}),(0,r.jsxs)("div",{className:"profile-detail-item",children:[r.jsx("label",{htmlFor:"phone",className:"block text-base md:text-lg font-medium text-gray-700 mb-2",children:"Telefonnummer"}),r.jsx("input",{id:"phone",name:"phone",type:"tel",value:b.phone||"",onChange:Y,className:`login-input ${F.phone?"border-red-500":""}`}),F.phone&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:F.phone})]}),(0,r.jsxs)("div",{className:"profile-detail-item",children:[r.jsx("label",{htmlFor:"birthdate",className:"block text-base md:text-lg font-medium text-gray-700 mb-2",children:"Geburtsdatum"}),r.jsx("input",{id:"birthdate",name:"birthdate",type:"date",value:b.birthdate||"",onChange:Y,className:"login-input"})]})]}),(0,r.jsxs)("div",{className:"profile-actions",children:[r.jsx("button",{onClick:es,className:"btn--edit",disabled:Object.keys(F).length>0,style:{opacity:Object.keys(F).length>0?.7:1,cursor:Object.keys(F).length>0?"not-allowed":"pointer"},children:"Profil speichern"}),r.jsx("button",{onClick:()=>{t&&(f({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phone||"",birthdate:t.birthdate||""}),k(t.profileImageUrl||null),w(null)),j(!1),B(null),L(null)},className:"btn--logout",children:"Abbrechen"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"profile-details-grid",children:[(0,r.jsxs)("div",{className:"profile-detail-item bg-[#f8f9fa] p-4 rounded-lg",children:[(0,r.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Vorname"]}),r.jsx("p",{children:t?.firstName})]}),(0,r.jsxs)("div",{className:"profile-detail-item bg-[#f8f9fa] p-4 rounded-lg",children:[(0,r.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Nachname"]}),r.jsx("p",{children:t?.lastName})]}),(0,r.jsxs)("div",{className:"profile-detail-item bg-[#f8f9fa] p-4 rounded-lg",children:[(0,r.jsxs)("h4",{className:"flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telefonnummer"]}),r.jsx("p",{children:t?.phone||"Nicht angegeben"})]}),(0,r.jsxs)("div",{className:"profile-detail-item bg-[#f8f9fa] p-4 rounded-lg",children:[(0,r.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Geburtsdatum"]}),r.jsx("p",{children:t?.birthdate?new Date(t.birthdate).toLocaleDateString("de-DE"):"Nicht angegeben"})]}),(0,r.jsxs)("div",{className:"profile-detail-item bg-[#f8f9fa] p-4 rounded-lg",children:[(0,r.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),r.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"E-Mail"]}),r.jsx("p",{children:t?.email})]})]}),r.jsx("div",{className:"profile-actions mt-6",children:(0,r.jsxs)("button",{onClick:()=>{t&&(f({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phone||"",birthdate:t.birthdate||""}),j(!0))},className:"btn--edit flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),r.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Profil bearbeiten"]})})]})})]})]})}):(0,r.jsxs)("div",{className:"bookings-content bg-white rounded-b-lg",children:[r.jsx("div",{className:"loyalty-progress-section",children:(0,r.jsxs)("div",{className:"loyalty-progress-card",children:[(0,r.jsxs)("div",{className:"loyalty-header",children:[r.jsx("div",{className:"loyalty-icon",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),(0,r.jsxs)("div",{className:"loyalty-title",children:[r.jsx("h3",{children:"⭐ Treuerabatt-Fortschritt"}),r.jsx("p",{children:"Sammeln Sie Behandlungen f\xfcr 20% Rabatt"})]})]}),K?(0,r.jsxs)("div",{className:"loyalty-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Lade Rabattdaten..."})]}):I?r.jsx(r.Fragment,{children:I.isEligible?(0,r.jsxs)("div",{className:"loyalty-eligible",children:[r.jsx("div",{className:"celebration-badge",children:"\uD83C\uDF89"}),r.jsx("h4",{children:"Herzlichen Gl\xfcckwunsch!"}),(0,r.jsxs)("p",{children:["Sie sind berechtigt f\xfcr ",r.jsx("strong",{children:"20% Treuerabatt"})," ","bei Ihrer n\xe4chsten Buchung!"]})]}):I.lastDiscountDate?(0,r.jsxs)("div",{className:"loyalty-reset",children:[(0,r.jsxs)("div",{className:"reset-info",children:[r.jsx("div",{className:"reset-icon",children:"✅"}),(0,r.jsxs)("div",{className:"reset-content",children:[r.jsx("h4",{children:"Treuerabatt verwendet!"}),(0,r.jsxs)("p",{className:"reset-description",children:["Sie haben am"," ",r.jsx("strong",{children:new Date(I.lastDiscountDate).toLocaleDateString("de-DE")})," ","Ihren 20% Treuerabatt eingel\xf6st."]}),r.jsx("p",{className:"reset-restart",children:"\uD83D\uDD04 Die Z\xe4hlung f\xfcr Ihren n\xe4chsten Treuerabatt hat neu begonnen!"})]})]}),(0,r.jsxs)("div",{className:"progress-section",children:[(0,r.jsxs)("div",{className:"progress-info",children:[(0,r.jsxs)("span",{className:"progress-numbers",children:[I.progress.current," /"," ",I.progress.required," Behandlungen"]}),r.jsx("span",{className:"progress-text",children:"f\xfcr den n\xe4chsten Treuerabatt"})]}),r.jsx("div",{className:"progress-bar-container",children:r.jsx("div",{className:"progress-bar",children:r.jsx("div",{className:"progress-fill",style:{width:`${I.progress.current/I.progress.required*100}%`}})})}),(0,r.jsxs)("div",{className:"progress-remaining",children:[(0,r.jsxs)("span",{className:"remaining-count",children:["Noch ",I.progress.remaining," ","Behandlungen"]}),r.jsx("span",{className:"remaining-text",children:"bis zu Ihrem n\xe4chsten 20% Rabatt!"})]})]})]}):(0,r.jsxs)("div",{className:"loyalty-progress",children:[(0,r.jsxs)("div",{className:"progress-info",children:[(0,r.jsxs)("span",{className:"progress-numbers",children:[I.progress.current," /"," ",I.progress.required," Behandlungen"]}),r.jsx("span",{className:"progress-text",children:"in den letzten 6 Monaten"})]}),r.jsx("div",{className:"progress-bar-container",children:r.jsx("div",{className:"progress-bar",children:r.jsx("div",{className:"progress-fill",style:{width:`${I.progress.current/I.progress.required*100}%`}})})}),(0,r.jsxs)("div",{className:"progress-remaining",children:[(0,r.jsxs)("span",{className:"remaining-count",children:["Noch ",I.progress.remaining," Behandlungen"]}),r.jsx("span",{className:"remaining-text",children:"bis zu 20% Rabatt!"})]})]})}):r.jsx("div",{className:"loyalty-error",children:r.jsx("p",{children:"Rabattdaten konnten nicht geladen werden."})}),U?.isEligible&&(0,r.jsxs)("div",{className:"birthday-bonus",children:[r.jsx("div",{className:"birthday-icon",children:"\uD83C\uDF82"}),(0,r.jsxs)("div",{className:"birthday-text",children:[r.jsx("h4",{children:"Happy Birthday!"}),(0,r.jsxs)("p",{children:["Sie erhalten diese Woche"," ",r.jsx("strong",{children:"10% Geburtstagsrabatt"})," auf alle Buchungen!"]})]})]})]})}),(0,r.jsxs)("div",{className:"bookings-section",children:[(0,r.jsxs)("h3",{className:"bookings-section-title flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Kommende Termine"]}),P.upcoming.length>0?r.jsx("div",{className:"bookings-list",children:P.upcoming.map(e=>el(e,!1))}):(0,r.jsxs)("div",{className:"no-bookings",children:[r.jsx("p",{children:"Sie haben keine kommenden Termine."}),r.jsx(c.default,{href:"/booking",className:"btn-book-new",children:"Neuen Termin buchen"})]})]}),(0,r.jsxs)("div",{className:"bookings-section",children:[(0,r.jsxs)("h3",{className:"bookings-section-title flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-[#b2d8db]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),r.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Vergangene Termine"]}),P.past.length>0?r.jsx("div",{className:"bookings-list",children:P.past.map(e=>el(e,!0))}):r.jsx("div",{className:"no-bookings",children:r.jsx("p",{children:"Sie haben noch keine vergangenen Termine."})})]})]}),A?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4 text-red-600",children:H?"Stornierung nicht m\xf6glich":"Buchung stornieren"}),r.jsx("p",{className:"text-gray-600 mb-6",children:H||"M\xf6chten Sie diese Buchung wirklich stornieren? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>{R(!1),V(null),_("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:H?"Schlie\xdfen":"Abbrechen"}),!H&&$&&r.jsx("button",{onClick:ei,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Ja, stornieren"})]})]})}):null]}):r.jsx("div",{className:"profile-card",children:(0,r.jsxs)("div",{className:"profile-content text-center py-12 px-6 md:px-12",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-28 w-28 text-[#b2d8db]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),r.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Sie sind nicht angemeldet"}),r.jsx("p",{className:"text-xl text-gray-600 mb-10",children:"Bitte melden Sie sich an, um Ihr Profil zu sehen."}),r.jsx("button",{onClick:()=>W.push("/login"),className:"btn--form",children:"Zur Anmeldung"})]})})}t(5345);var m=t(5777),g=t(5295);function p(){return(0,r.jsxs)(r.Fragment,{children:[r.jsx(m.Z,{}),r.jsx("main",{className:"main",children:r.jsx("section",{className:"section-profile py-12 md:py-20",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"profile-header mb-8 text-center",children:[r.jsx("h1",{className:"heading-primary mb-4",children:"Mein Profil"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Verwalten Sie Ihre pers\xf6nlichen Daten und sehen Sie Ihre Buchungen."})]}),r.jsx(u,{})]})})}),r.jsx(g.Z,{})]})}},5282:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/sbehaein/Desktop/Sheenweb2 Versionen/Version mit login (18.03.2025)/src/app/profile/page.tsx#default`)},5345:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[628,46,226,187,920,15,365,669],()=>t(4705));module.exports=r})();