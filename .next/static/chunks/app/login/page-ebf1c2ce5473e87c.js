(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{263:function(e,s,r){Promise.resolve().then(r.bind(r,8915))},9376:function(e,s,r){"use strict";var n=r(5475);r.o(n,"useRouter")&&r.d(s,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(s,{useSearchParams:function(){return n.useSearchParams}})},8915:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var n=r(7437),t=r(2265),i=r(9376),l=r(6108);function a(e){let{onLoginSuccess:s,initialResetMode:r=!1}=e,[a,o]=(0,t.useState)(""),[d,c]=(0,t.useState)(""),[u,g]=(0,t.useState)(null),[h,m]=(0,t.useState)(null),[x,f]=(0,t.useState)(!1),[p,w]=(0,t.useState)(r),b=(0,i.useRouter)();console.log("LoginForm wird gerendert mit showResetPassword =",p),console.log("initialResetMode =",r),(0,t.useEffect)(()=>{console.log("useEffect: initialResetMode =",r),w(r)},[r]),(0,t.useEffect)(()=>{{let e=sessionStorage.getItem("resetSuccess");e&&(m(e),sessionStorage.removeItem("resetSuccess"))}},[]);let j=e=>e.includes("auth/invalid-credential")||e.includes("auth/wrong-password")||e.includes("auth/user-not-found")?"E-Mail oder Passwort ist falsch. Bitte \xfcberpr\xfcfen Sie Ihre Eingaben.":e.includes("auth/too-many-requests")?"Zu viele fehlgeschlagene Anmeldeversuche. Bitte versuchen Sie es sp\xe4ter erneut oder setzen Sie Ihr Passwort zur\xfcck.":e.includes("auth/user-disabled")?"Dieses Konto wurde deaktiviert. Bitte kontaktieren Sie den Support.":e.includes("auth/invalid-email")?"Ung\xfcltiges E-Mail-Format. Bitte geben Sie eine g\xfcltige E-Mail-Adresse ein.":e.includes("auth/email-already-in-use")?"Diese E-Mail-Adresse wird bereits verwendet. Bitte versuchen Sie sich anzumelden oder nutzen Sie die Passwort-Vergessen-Funktion.":"Bei der Anmeldung ist ein Fehler aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.",v=async e=>{e.preventDefault(),g(null),f(!0);try{let e=await (0,l.WL)(a,d);e.success?(m("Anmeldung erfolgreich!"),s?s():b.push("/profile")):g(e.error?j(e.error):"Anmeldung fehlgeschlagen. Bitte \xfcberpr\xfcfen Sie Ihre Eingaben.")}catch(e){g("Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut."),console.error("Login error:",e)}finally{f(!1)}},N=async e=>{g(null),f(!0);try{let r=await (0,l.IG)(e);r.success?(m("Anmeldung erfolgreich!"),s?s():b.push("/profile")):(r.error?g(j(r.error)):g("Anmeldung mit Google fehlgeschlagen."),console.error("".concat(e," login error:"),r.error))}catch(s){g("Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut."),console.error("".concat(e," login unexpected error:"),s)}finally{f(!1)}},S=async e=>{if(e.preventDefault(),!a){g("Bitte geben Sie Ihre E-Mail-Adresse ein");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){g("Bitte geben Sie eine g\xfcltige E-Mail-Adresse ein");return}g(null),f(!0);try{console.log("Sende Passwort-Reset-Anfrage f\xfcr:",a);let e=await (0,l.c0)(a);e.success?(console.log("Passwort-Reset-Anfrage erfolgreich gesendet"),m("Eine E-Mail zum Zur\xfccksetzen des Passworts wurde an Sie gesendet. Bitte \xfcberpr\xfcfen Sie Ihren Posteingang und auch den Spam-Ordner."),g(null),setTimeout(()=>{w(!1)},5e3)):(console.error("Passwort-Reset-Anfrage fehlgeschlagen:",e.error),e.error?e.error.includes("Es wurde kein Konto mit dieser E-Mail-Adresse gefunden")?(m("Aus Sicherheitsgr\xfcnden informieren wir Sie, dass eine E-Mail gesendet wurde, falls ein Konto mit dieser Adresse existiert."),g(null),setTimeout(()=>{w(!1)},5e3)):g(j(e.error)):g("Passwort-Reset fehlgeschlagen. Bitte \xfcberpr\xfcfen Sie Ihre E-Mail-Adresse."))}catch(e){console.error("Unerwarteter Fehler beim Passwort-Reset:",e),g("Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{f(!1)}},k=(e,s,r)=>{e.preventDefault(),e.stopPropagation(),console.log("".concat(r," Button geklickt")),s()};return(0,n.jsxs)("div",{className:"login-body",children:[(0,n.jsxs)("div",{style:{display:"none"},children:[(0,n.jsxs)("p",{children:["Debug: showResetPassword = ",String(p)]}),(0,n.jsxs)("p",{children:["Debug: initialResetMode = ",String(r)]})]}),u&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-md text-lg border border-red-300 shadow-sm",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{className:"w-6 h-6 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("span",{children:u})]})}),h&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-green-100 text-green-700 rounded-md text-lg border border-green-300 shadow-sm",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{className:"w-6 h-6 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,n.jsx)("span",{children:h})]})}),p?(0,n.jsxs)("div",{className:"password-reset-container",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Passwort zur\xfccksetzen"}),(0,n.jsx)("p",{className:"mb-4 text-gray-600",children:"Geben Sie Ihre E-Mail-Adresse ein, und wir senden Ihnen einen Link zum Zur\xfccksetzen Ihres Passworts."}),(0,n.jsxs)("form",{onSubmit:S,children:[(0,n.jsxs)("div",{className:"login-form-group",children:[(0,n.jsx)("label",{htmlFor:"reset-email",className:"login-label",children:"E-Mail"}),(0,n.jsx)("input",{id:"reset-email",type:"email",value:a,onChange:e=>o(e.target.value),required:!0,className:"login-input",placeholder:"ihre@email.de"})]}),(0,n.jsx)("button",{type:"submit",disabled:x,className:"login-button mb-4",children:x?"Wird gesendet...":"Passwort zur\xfccksetzen"}),(0,n.jsx)("button",{type:"button",onClick:e=>k(e,()=>{w(!1),console.log("showResetPassword wurde auf false gesetzt")},"Zur\xfcck zur Anmeldung"),className:"login-button bg-gray-200 hover:bg-gray-300 text-gray-800",children:"Zur\xfcck zur Anmeldung"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"social-login-container",children:(0,n.jsx)("button",{type:"button",onClick:e=>k(e,()=>N("google.com"),"Google"),className:"social-button social-button-google",disabled:x,"aria-label":"Mit Google anmelden",children:(0,n.jsxs)("div",{className:"social-button-content",children:[(0,n.jsx)("svg",{className:"social-button-icon",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[(0,n.jsx)("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),(0,n.jsx)("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),(0,n.jsx)("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),(0,n.jsx)("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),(0,n.jsx)("span",{className:"social-button-text",children:"Mit Google anmelden"})]})})}),(0,n.jsxs)("div",{className:"login-divider",children:[(0,n.jsx)("div",{className:"login-divider-line"}),(0,n.jsx)("span",{className:"login-divider-text",children:"oder"}),(0,n.jsx)("div",{className:"login-divider-line"})]}),(0,n.jsx)("div",{className:"flex justify-end mb-6",children:(0,n.jsx)("button",{type:"button",onClick:e=>k(e,()=>{w(!0),console.log("showResetPassword wurde auf true gesetzt")},"Passwort vergessen"),className:"login-link",children:"Passwort vergessen?"})}),(0,n.jsxs)("form",{onSubmit:v,children:[(0,n.jsxs)("div",{className:"login-form-group",children:[(0,n.jsx)("label",{htmlFor:"email",className:"login-label",children:"E-Mail"}),(0,n.jsx)("input",{id:"email",type:"email",value:a,onChange:e=>o(e.target.value),required:!0,className:"login-input",placeholder:"ihre@email.de"})]}),(0,n.jsxs)("div",{className:"login-form-group",children:[(0,n.jsx)("label",{htmlFor:"password",className:"login-label",children:"Passwort"}),(0,n.jsx)("input",{id:"password",type:"password",value:d,onChange:e=>c(e.target.value),required:!0,className:"login-input",placeholder:"••••••••"})]}),(0,n.jsx)("button",{type:"submit",disabled:x,className:"login-button",children:x?"Wird angemeldet...":"Anmelden"}),(0,n.jsx)("div",{className:"login-footer",children:(0,n.jsxs)("p",{className:"text-lg text-gray-600",children:["Noch kein Konto?"," ",(0,n.jsx)("button",{type:"button",onClick:e=>k(e,()=>b.push("/register"),"Jetzt registrieren"),className:"login-link",children:"Jetzt registrieren"})]})})]})]})]})}function o(){let e=(0,i.useSearchParams)(),s=e.get("registered"),r=e.get("reset");return(0,n.jsx)("div",{className:"login-container",children:(0,n.jsxs)("div",{className:"w-full max-w-2xl mx-auto px-6",children:[s&&(0,n.jsx)("div",{className:"mb-8 p-5 bg-green-100 text-green-700 rounded-md text-center text-lg",children:"Registrierung erfolgreich! Sie k\xf6nnen sich jetzt anmelden."}),(0,n.jsxs)("div",{className:"login-card",children:[(0,n.jsxs)("div",{className:"login-header",children:[(0,n.jsx)("h1",{className:"login-title",children:"Anmelden"}),(0,n.jsx)("p",{className:"login-subtitle",children:"Melden Sie sich mit Ihren Zugangsdaten an"})]}),(0,n.jsx)(a,{initialResetMode:"true"===r})]})]})})}function d(){return(0,n.jsx)(t.Suspense,{fallback:(0,n.jsx)("div",{children:"Wird geladen..."}),children:(0,n.jsx)(o,{})})}}},function(e){e.O(0,[358,657,432,108,971,117,744],function(){return e(e.s=263)}),_N_E=e.O()}]);