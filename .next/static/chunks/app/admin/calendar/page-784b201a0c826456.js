(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{118:function(e,a,t){Promise.resolve().then(t.bind(t,8472))},9376:function(e,a,t){"use strict";var r=t(5475);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},4601:function(){},8975:function(e,a,t){"use strict";var r=t(257);t(4601);var n=t(2265),i=n&&"object"==typeof n&&"default"in n?n:{default:n},s=void 0!==r&&r.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},c=function(){function e(e){var a=void 0===e?{}:e,t=a.name,r=void 0===t?"stylesheet":t,n=a.optimizeForSpeed,i=void 0===n?s:n;d(o(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",d("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var c="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=c?c.getAttribute("content"):null}var a=e.prototype;return a.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},a.isOptimizeForSpeed=function(){return this._optimizeForSpeed},a.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(s||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(a,t){return"number"==typeof t?e._serverSheet.cssRules[t]={cssText:a}:e._serverSheet.cssRules.push({cssText:a}),t},deleteRule:function(a){e._serverSheet.cssRules[a]=null}}},a.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].ownerNode===e)return document.styleSheets[a]},a.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},a.insertRule=function(e,a){if(d(o(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof a&&(a=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,a),this._rulesCount++;if(this._optimizeForSpeed){var t=this.getSheet();"number"!=typeof a&&(a=t.cssRules.length);try{t.insertRule(e,a)}catch(a){return s||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[a];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},a.replaceRule=function(e,a){if(this._optimizeForSpeed||"undefined"==typeof window){var t="undefined"!=typeof window?this.getSheet():this._serverSheet;if(a.trim()||(a=this._deletedRulePlaceholder),!t.cssRules[e])return e;t.deleteRule(e);try{t.insertRule(a,e)}catch(r){s||console.warn("StyleSheet: illegal rule: \n\n"+a+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),t.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];d(r,"old rule at index `"+e+"` not found"),r.textContent=a}return e},a.deleteRule=function(e){if("undefined"==typeof window){this._serverSheet.deleteRule(e);return}if(this._optimizeForSpeed)this.replaceRule(e,"");else{var a=this._tags[e];d(a,"rule at index `"+e+"` not found"),a.parentNode.removeChild(a),this._tags[e]=null}},a.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},a.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(a,t){return t?a=a.concat(Array.prototype.map.call(e.getSheetForTag(t).cssRules,function(a){return a.cssText===e._deletedRulePlaceholder?null:a})):a.push(null),a},[])},a.makeStyleTag=function(e,a,t){a&&d(o(a),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),a&&r.appendChild(document.createTextNode(a));var n=document.head||document.getElementsByTagName("head")[0];return t?n.insertBefore(r,t):n.appendChild(r),r},function(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,a){if(!e)throw Error("StyleSheet: "+a+".")}var l=function(e){for(var a=5381,t=e.length;t;)a=33*a^e.charCodeAt(--t);return a>>>0},u={};function m(e,a){if(!a)return"jsx-"+e;var t=String(a),r=e+t;return u[r]||(u[r]="jsx-"+l(e+"-"+t)),u[r]}function x(e,a){"undefined"==typeof window&&(a=a.replace(/\/style/gi,"\\/style"));var t=e+a;return u[t]||(u[t]=a.replace(/__jsx-style-dynamic-selector/g,e)),u[t]}var b=function(){function e(e){var a=void 0===e?{}:e,t=a.styleSheet,r=void 0===t?null:t,n=a.optimizeForSpeed,i=void 0!==n&&n;this._sheet=r||new c({name:"styled-jsx",optimizeForSpeed:i}),this._sheet.inject(),r&&"boolean"==typeof i&&(this._sheet.setOptimizeForSpeed(i),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var a=e.prototype;return a.add=function(e){var a=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,a){return e[a]=0,e},{}));var t=this.getIdAndRules(e),r=t.styleId,n=t.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var i=n.map(function(e){return a._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=i,this._instancesCounts[r]=1},a.remove=function(e){var a=this,t=this.getIdAndRules(e).styleId;if(function(e,a){if(!e)throw Error("StyleSheetRegistry: "+a+".")}(t in this._instancesCounts,"styleId: `"+t+"` not found"),this._instancesCounts[t]-=1,this._instancesCounts[t]<1){var r=this._fromServer&&this._fromServer[t];r?(r.parentNode.removeChild(r),delete this._fromServer[t]):(this._indices[t].forEach(function(e){return a._sheet.deleteRule(e)}),delete this._indices[t]),delete this._instancesCounts[t]}},a.update=function(e,a){this.add(a),this.remove(e)},a.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},a.cssRules=function(){var e=this,a=this._fromServer?Object.keys(this._fromServer).map(function(a){return[a,e._fromServer[a]]}):[],t=this._sheet.cssRules();return a.concat(Object.keys(this._indices).map(function(a){return[a,e._indices[a].map(function(e){return t[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},a.styles=function(e){var a,t;return a=this.cssRules(),void 0===(t=e)&&(t={}),a.map(function(e){var a=e[0],r=e[1];return i.default.createElement("style",{id:"__"+a,key:"__"+a,nonce:t.nonce?t.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},a.getIdAndRules=function(e){var a=e.children,t=e.dynamic,r=e.id;if(t){var n=m(r,t);return{styleId:n,rules:Array.isArray(a)?a.map(function(e){return x(n,e)}):[x(n,a)]}}return{styleId:m(r),rules:Array.isArray(a)?a:[a]}},a.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,a){return e[a.id.slice(2)]=a,e},{})},e}(),p=n.createContext(null);p.displayName="StyleSheetContext";var f=i.default.useInsertionEffect||i.default.useLayoutEffect,h="undefined"!=typeof window?new b:void 0;function g(e){var a=h||n.useContext(p);return a&&("undefined"==typeof window?a.add(e):f(function(){return a.add(e),function(){a.remove(e)}},[e.id,String(e.dynamic)])),null}g.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},a.style=g},29:function(e,a,t){"use strict";e.exports=t(8975).style},8472:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return x}});var r=t(7437),n=t(29),i=t.n(n),s=t(2265),o=t(9376),c=t(3301),d=t(6108),l=t(5978),u=t(3608);function m(e){let{onClose:a}=e,[t,n]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[m,x]=(0,s.useState)([]),[b,p]=(0,s.useState)(""),[f,h]=(0,s.useState)("full-day"),[g,j]=(0,s.useState)("09:00"),[w,k]=(0,s.useState)("18:00"),[y,v]=(0,s.useState)(""),[S,D]=(0,s.useState)(""),[z,_]=(0,s.useState)(""),[N,F]=(0,s.useState)(!1),[C,T]=(0,s.useState)(null),[A,E]=(0,s.useState)(null),[B,R]=(0,s.useState)([]),[I,L]=(0,s.useState)(!1),[Z,O]=(0,s.useState)(!1),P=e=>{try{let[a,t,r]=e.split("-");return"".concat(r,"/").concat(t,"/").concat(a)}catch(a){return console.warn("Fehler beim Formatieren des Datums:",e),e}},M=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00"];(0,s.useEffect)(()=>{"time-range"!==f||(console.log("\uD83D\uDD50 Pr\xfcfe Uhrzeiten-Initialisierung:",{startTime:g,endTime:w}),g&&M.includes(g)||(console.log("\uD83D\uDD27 Setze Standard-Startzeit: 09:00"),j("09:00")),w&&M.includes(w)||(console.log("\uD83D\uDD27 Setze Standard-Endzeit: 18:00"),k("18:00")))},[f]),(0,s.useEffect)(()=>{console.log("\uD83D\uDE80 AdminCalendar: Erste Initialisierung der Uhrzeiten"),g||j("09:00"),w||k("18:00")},[]),(0,s.useEffect)(()=>{console.log("\uD83D\uDD27 AdminCalendar: Initialisiere Firebase Auth Listener...");let e=(0,c.Aj)(d.I8,e=>{console.log("\uD83D\uDD27 AdminCalendar: Auth State ge\xe4ndert:",e?{uid:e.uid,email:e.email,displayName:e.displayName}:"Nicht angemeldet"),n(e),l(!1)});return()=>e()},[]);let U=async()=>{try{F(!0),T(null);let e=await (0,u.hS)();x(e),console.log("✅ Gesperrte Zeiten geladen:",e.length),0===e.length&&console.info("ℹ️ Keine gesperrten Zeiten gefunden. Das ist normal wenn noch keine erstellt wurden.")}catch(a){var e;console.error("Fehler beim Laden der gesperrten Zeiten:",a),(null===(e=a.message)||void 0===e?void 0:e.includes("index"))?(T("⚠️ Firebase Index wird erstellt... Die Liste wird in wenigen Minuten verf\xfcgbar sein. Sperrungen funktionieren bereits!"),console.warn("\uD83D\uDCA1 Hinweis: Das Index-Problem behebt sich automatisch. Sperrungen funktionieren trotzdem!")):T("❌ Fehler beim Laden der gesperrten Zeiten")}finally{F(!1)}};(0,s.useEffect)(()=>{o||U()},[o]),(0,s.useEffect)(()=>{if(A||C){let e=A?6e3:4e3;console.log("⏰ Meldung wird f\xfcr ".concat(e/1e3,"s angezeigt:"),A||C);let a=setTimeout(()=>{E(null),T(null),console.log("\uD83D\uDCAB Meldung ausgeblendet")},e);return()=>clearTimeout(a)}},[A,C]);let G=(e,a)=>{if(!e||!a)return 0;let t=new Date(e);return Math.ceil((new Date(a).getTime()-t.getTime())/864e5)+1},J=async()=>{if(console.log("\uD83D\uDD27 DEBUG: handleBlock gestartet",{blockType:f,selectedDate:b,startDate:y,endDate:S,startTime:g,endTime:w,reason:z.trim(),userUid:null==t?void 0:t.uid,user:t?"vorhanden":"nicht vorhanden",isUserLoading:o}),o){T("⏳ Benutzer wird geladen, bitte warten...");return}if(!(null==t?void 0:t.uid)){T("❌ Benutzer nicht authentifiziert. Bitte laden Sie die Seite neu."),console.error("❌ Kein currentUser.uid vorhanden:",t);return}if(!z.trim()){T("❌ Bitte geben Sie einen Grund f\xfcr die Sperrung an");return}if("date-range"===f){if(!y){T("❌ Bitte w\xe4hlen Sie ein Startdatum aus");return}if(!S){T("❌ Bitte w\xe4hlen Sie ein Enddatum aus");return}if(new Date(y)>new Date(S)){T("❌ Startdatum muss vor oder gleich dem Enddatum liegen");return}let e=G(y,S);if(e>365){T("❌ Maximal 365 Tage k\xf6nnen gleichzeitig gesperrt werden");return}if(e>30&&!window.confirm("M\xf6chten Sie wirklich ".concat(e," Tage sperren? (").concat(y," bis ").concat(S,")")))return}else if("time-range"===f){if(!b){T("❌ Bitte w\xe4hlen Sie ein Datum aus");return}if(!g){T("❌ Bitte w\xe4hlen Sie eine Startzeit aus");return}if(!w){T("❌ Bitte w\xe4hlen Sie eine Endzeit aus");return}}else if(!b){T("❌ Bitte w\xe4hlen Sie ein Datum aus");return}console.log("✅ Alle Validierungen bestanden, starte Sperrung...");try{let e;if(F(!0),T(null),E(null),console.log("\uD83D\uDE80 F\xfchre Sperrung aus...",f),"full-day"===f?(console.log("\uD83D\uDCC5 Sperre ganzen Tag:",b),e=await (0,u.IJ)(b,z.trim(),t.uid)):"date-range"===f?(console.log("\uD83C\uDFD6️ Sperre Datumsbereich:",y,"bis",S),e=await (0,u.wi)(y,S,z.trim(),t.uid)):(console.log("⏰ Sperre Zeitbereich:",b,g,"-",w),e=await (0,u.VR)(b,g,w,z.trim(),t.uid)),console.log("\uD83D\uDCCB Sperrung-Ergebnis:",e),e.success){let a="";if("full-day"===f)a="✅ Ganzer Tag erfolgreich gesperrt: ".concat(b);else if("date-range"===f){let e=G(y,S);a="✅ ".concat(e," Tage erfolgreich gesperrt: ").concat(y," bis ").concat(S)}else a="✅ Zeitraum erfolgreich gesperrt: ".concat(b," von ").concat(g," bis ").concat(w," Uhr");let t=e.error||a;E(t),console.log("\uD83C\uDF89 Erfolgsmeldung gesetzt:",t),p(""),v(""),D(""),_(""),j("09:00"),k("18:00"),console.log("\uD83D\uDD04 Lade gesperrte Zeiten neu..."),await U(),console.log("✅ Liste wurde aktualisiert")}else{let a=e.error||"❌ Unbekannter Fehler beim Sperren";T(a),console.error("❌ Sperrung fehlgeschlagen:",a)}}catch(e){console.error("Fehler beim Sperren:",e),T("Ein unerwarteter Fehler ist aufgetreten")}finally{F(!1)}},V=async e=>{if(window.confirm("M\xf6chten Sie diese Sperrung wirklich aufheben?"))try{F(!0);let a=await (0,u.NB)(e);a.success?(E("Sperrung erfolgreich aufgehoben"),await U()):T(a.error||"Fehler beim Aufheben der Sperrung")}catch(e){console.error("Fehler beim Aufheben der Sperrung:",e),T("Ein unerwarteter Fehler ist aufgetreten")}finally{F(!1)}},K=e=>{B.includes(e)?R(B.filter(a=>a!==e)):R([...B,e])},W=async()=>{if(0===B.length){T("Bitte w\xe4hlen Sie mindestens eine Sperrung aus");return}let e="M\xf6chten Sie wirklich ".concat(B.length," Sperrung(en) l\xf6schen?");if(window.confirm(e)){O(!0);try{let e=0,a=0;for(let t of B)try{(await (0,u.NB)(t)).success?e++:a++}catch(e){a++,console.error("Fehler beim L\xf6schen von Sperrung ".concat(t,":"),e)}e>0?(E("".concat(e," Sperrung(en) erfolgreich gel\xf6scht").concat(a>0?", ".concat(a," Fehler"):"")),await U(),R([]),m.length===B.length&&L(!1)):T("Fehler beim L\xf6schen von ".concat(a," Sperrung(en)"))}catch(e){console.error("Fehler beim Bulk-L\xf6schen:",e),T("Ein unerwarteter Fehler beim L\xf6schen ist aufgetreten")}finally{O(!1)}}},q=new Date().toISOString().split("T")[0];return o?(0,r.jsxs)("div",{className:"admin-calendar-management",children:[(0,r.jsxs)("div",{className:"calendar-header",children:[(0,r.jsx)("h2",{children:"\uD83D\uDCC5 Kalender-Verwaltung"}),a&&(0,r.jsx)("button",{onClick:a,className:"btn-close",children:"✕"})]}),(0,r.jsxs)("div",{className:"loading-container",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"⏳ Lade Benutzerinformationen..."})]})]}):t?(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c admin-calendar-management",children:[(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c calendar-header",children:[(0,r.jsx)("h2",{className:"jsx-8a4a543cdda70c",children:"\uD83D\uDCC5 Kalender-Verwaltung"}),a&&(0,r.jsx)("button",{onClick:a,className:"jsx-8a4a543cdda70c btn-close",children:"✕"})]}),!1,C&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c "+"alert ".concat(C.includes("Index")?"alert-warning":"alert-error"),children:[C.includes("Index")?"⚠️":"❌"," ",C]}),A&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c alert alert-success",children:["\uD83C\uDF89 ",A]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c block-form",children:[(0,r.jsx)("h3",{className:"jsx-8a4a543cdda70c",children:"\uD83D\uDEAB Neue Sperrung erstellen"}),("full-day"===f||"time-range"===f)&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[(0,r.jsx)("label",{htmlFor:"date",className:"jsx-8a4a543cdda70c",children:"Datum:"}),(0,r.jsx)("input",{type:"date",id:"date",value:b,min:q,onChange:e=>p(e.target.value),className:"jsx-8a4a543cdda70c form-input"})]}),"date-range"===f&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c date-range-inputs",children:[(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c date-range-header",children:[(0,r.jsx)("h4",{className:"jsx-8a4a543cdda70c",children:"\uD83D\uDCC5 Datumsbereich ausw\xe4hlen"}),(0,r.jsx)("p",{className:"jsx-8a4a543cdda70c help-text",children:"W\xe4hlen Sie den ersten und letzten Tag des Zeitraums"})]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[(0,r.jsx)("label",{htmlFor:"start-date",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDDD3️ Startdatum:"}),(0,r.jsx)("input",{type:"date",id:"start-date",value:y,min:q,onChange:e=>v(e.target.value),placeholder:"W\xe4hlen Sie das Startdatum",className:"jsx-8a4a543cdda70c form-input"})]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[(0,r.jsx)("label",{htmlFor:"end-date",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDDD3️ Enddatum:"}),(0,r.jsx)("input",{type:"date",id:"end-date",value:S,min:y||q,onChange:e=>D(e.target.value),placeholder:"W\xe4hlen Sie das Enddatum",className:"jsx-8a4a543cdda70c form-input"})]}),y&&S&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c date-range-info",children:[(0,r.jsxs)("span",{className:"jsx-8a4a543cdda70c days-count",children:["\uD83D\uDCC5 ",G(y,S)," Tage werden gesperrt"]}),(0,r.jsxs)("span",{className:"jsx-8a4a543cdda70c date-preview",children:[y," bis ",S]}),G(y,S)>30&&(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c warning-text",children:"⚠️ L\xe4ngerer Zeitraum - Best\xe4tigung erforderlich"})]})]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[(0,r.jsx)("label",{className:"jsx-8a4a543cdda70c",children:"Sperrungstyp:"}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-group",children:[(0,r.jsxs)("label",{className:"jsx-8a4a543cdda70c radio-label",children:[(0,r.jsx)("input",{type:"radio",value:"full-day",checked:"full-day"===f,onChange:e=>h(e.target.value),className:"jsx-8a4a543cdda70c"}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-content",children:[(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c radio-title",children:"\uD83D\uDCC5 Einzelner Tag"}),(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c radio-desc",children:"Einen kompletten Tag sperren"})]})]}),(0,r.jsxs)("label",{className:"jsx-8a4a543cdda70c radio-label",children:[(0,r.jsx)("input",{type:"radio",value:"date-range",checked:"date-range"===f,onChange:e=>h(e.target.value),className:"jsx-8a4a543cdda70c"}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-content",children:[(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c radio-title",children:"\uD83C\uDFD6️ Mehrere Tage"}),(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c radio-desc",children:"Von Datum bis Datum (z.B. Urlaub)"})]})]}),(0,r.jsxs)("label",{className:"jsx-8a4a543cdda70c radio-label",children:[(0,r.jsx)("input",{type:"radio",value:"time-range",checked:"time-range"===f,onChange:e=>h(e.target.value),className:"jsx-8a4a543cdda70c"}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c radio-content",children:[(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c radio-title",children:"⏰ Bestimmte Uhrzeiten"}),(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c radio-desc",children:"Nur bestimmte Stunden an einem Tag"})]})]})]})]}),"time-range"===f&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c time-range-inputs",children:[(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c time-range-header",children:[(0,r.jsx)("h4",{className:"jsx-8a4a543cdda70c",children:"⏰ Uhrzeiten ausw\xe4hlen"}),(0,r.jsx)("p",{className:"jsx-8a4a543cdda70c help-text",children:"W\xe4hlen Sie den Zeitraum f\xfcr die Sperrung"})]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[(0,r.jsx)("label",{htmlFor:"start-time",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDD50 Von Uhrzeit:"}),(0,r.jsxs)("select",{id:"start-time",value:g||"09:00",onChange:e=>j(e.target.value),className:"jsx-8a4a543cdda70c form-select",children:[(0,r.jsx)("option",{value:"",disabled:!0,className:"jsx-8a4a543cdda70c",children:"Startzeit ausw\xe4hlen..."}),M.map(e=>(0,r.jsxs)("option",{value:e,className:"jsx-8a4a543cdda70c",children:[e," Uhr"]},e))]})]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[(0,r.jsx)("label",{htmlFor:"end-time",className:"jsx-8a4a543cdda70c",children:"\uD83D\uDD50 Bis Uhrzeit:"}),(0,r.jsxs)("select",{id:"end-time",value:w||"18:00",onChange:e=>k(e.target.value),className:"jsx-8a4a543cdda70c form-select",children:[(0,r.jsx)("option",{value:"",disabled:!0,className:"jsx-8a4a543cdda70c",children:"Endzeit ausw\xe4hlen..."}),M.map(e=>(0,r.jsxs)("option",{value:e,className:"jsx-8a4a543cdda70c",children:[e," Uhr"]},e))]})]}),g&&w&&(0,r.jsx)("div",{className:"jsx-8a4a543cdda70c time-range-info",children:(0,r.jsxs)("span",{className:"jsx-8a4a543cdda70c time-preview",children:["⏰ Sperrung: ",g," - ",w," Uhr"]})})]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c form-group",children:[(0,r.jsx)("label",{htmlFor:"reason",className:"jsx-8a4a543cdda70c",children:"Grund:"}),(0,r.jsxs)("select",{value:z,onChange:e=>_(e.target.value),className:"jsx-8a4a543cdda70c form-select",children:[(0,r.jsx)("option",{value:"",className:"jsx-8a4a543cdda70c",children:"Grund ausw\xe4hlen..."}),["Urlaub","Krankheit","Gesch\xe4ftstermin","Wartung","Feiertag","Sonstiges"].map(e=>(0,r.jsx)("option",{value:e,className:"jsx-8a4a543cdda70c",children:e},e))]}),(0,r.jsx)("input",{type:"text",placeholder:"Oder eigenen Grund eingeben...",value:z,onChange:e=>_(e.target.value),className:"jsx-8a4a543cdda70c form-input mt-2"})]}),(0,r.jsx)("button",{onClick:J,disabled:N||!z.trim()||("date-range"===f?!y||!S:!b),className:"jsx-8a4a543cdda70c btn-block",children:N?"⏳ Sperrung wird erstellt...":"date-range"===f?"\uD83D\uDEAB ".concat(y&&S?G(y,S)+" Tage":"Tage"," sperren"):"\uD83D\uDEAB Zeit sperren"})]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c blocked-times-list",children:[(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c blocked-times-header",children:[(0,r.jsxs)("h3",{className:"jsx-8a4a543cdda70c",children:["\uD83D\uDEAB Aktuelle Sperrungen (",m.length,")"]}),m.length>0&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c bulk-controls",children:[(0,r.jsx)("button",{onClick:()=>{L(!I),R([])},className:"jsx-8a4a543cdda70c "+"btn-bulk-toggle ".concat(I?"active":""),children:I?"✕ Auswahl beenden":"☑️ Mehrfach ausw\xe4hlen"}),I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{R(m.map(e=>e.id).filter(Boolean))},disabled:B.length===m.length,className:"jsx-8a4a543cdda70c btn-bulk-action",children:"✅ Alle ausw\xe4hlen"}),(0,r.jsx)("button",{onClick:()=>{R([])},disabled:0===B.length,className:"jsx-8a4a543cdda70c btn-bulk-action",children:"❌ Alle abw\xe4hlen"}),(0,r.jsx)("button",{onClick:W,disabled:0===B.length||Z,className:"jsx-8a4a543cdda70c btn-bulk-delete",children:Z?"⏳ L\xf6sche...":"\uD83D\uDDD1️ ".concat(B.length," l\xf6schen")})]})]})]}),N&&0===m.length?(0,r.jsx)("div",{className:"jsx-8a4a543cdda70c loading",children:"Lade gesperrte Zeiten..."}):0===m.length?(0,r.jsx)("div",{className:"jsx-8a4a543cdda70c no-blocks",children:(null==C?void 0:C.includes("Index"))?(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c",children:[(0,r.jsx)("p",{className:"jsx-8a4a543cdda70c",children:"⚠️ Firebase Index wird erstellt"}),(0,r.jsx)("small",{className:"jsx-8a4a543cdda70c",children:"Die Liste wird in wenigen Minuten verf\xfcgbar sein. Sperrungen funktionieren bereits!"})]}):"Keine Sperrungen vorhanden"}):(0,r.jsx)("div",{className:"jsx-8a4a543cdda70c blocks-grid",children:m.map(e=>(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c "+"block-item ".concat(I&&B.includes(e.id||"")?"selected":""),children:[(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c block-header",children:[I&&(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c checkbox-container",children:[(0,r.jsx)("input",{type:"checkbox",id:"block-".concat(e.id),checked:B.includes(e.id||""),onChange:()=>e.id&&K(e.id),className:"jsx-8a4a543cdda70c block-checkbox"}),(0,r.jsx)("label",{htmlFor:"block-".concat(e.id),className:"jsx-8a4a543cdda70c checkbox-label"})]}),(0,r.jsxs)("span",{className:"jsx-8a4a543cdda70c block-date",children:["\uD83D\uDCC5 ",P(e.date)]}),!I&&(0,r.jsx)("button",{onClick:()=>e.id&&V(e.id),title:"Sperrung aufheben",className:"jsx-8a4a543cdda70c btn-unblock",children:"❌"})]}),(0,r.jsx)("div",{className:"jsx-8a4a543cdda70c block-time",children:e.isFullDay?(0,r.jsx)("span",{className:"jsx-8a4a543cdda70c full-day",children:"\uD83D\uDEAB Ganzer Tag"}):(0,r.jsxs)("span",{className:"jsx-8a4a543cdda70c time-range",children:["⏰ ",e.startTime," - ",e.endTime]})}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c block-reason",children:["\uD83D\uDCAC ",e.reason]}),(0,r.jsxs)("div",{className:"jsx-8a4a543cdda70c block-meta",children:["Erstellt:"," ",e.createdAt.toDate().toLocaleDateString("de-DE")]})]},e.id))})]}),(0,r.jsx)(i(),{id:"8a4a543cdda70c",children:'.admin-calendar-management.jsx-8a4a543cdda70c{max-width:1e3px;margin:0 auto;padding:20px;background:#fff;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;-webkit-box-shadow:0 4px 6px rgba(0,0,0,.1);-moz-box-shadow:0 4px 6px rgba(0,0,0,.1);box-shadow:0 4px 6px rgba(0,0,0,.1)}.calendar-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid#e5e7eb}.calendar-header.jsx-8a4a543cdda70c h2.jsx-8a4a543cdda70c{margin:0;color:#1f2937;font-size:1.8rem}.btn-close.jsx-8a4a543cdda70c{background:#ef4444;color:white;border:none;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:40px;height:40px;cursor:pointer;font-size:1.2rem}.loading-container.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:60px 20px;text-align:center}.loading-spinner.jsx-8a4a543cdda70c{width:40px;height:40px;border:4px solid#e5e7eb;border-top:4px solid#3b82f6;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin-bottom:20px}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.debug-info.jsx-8a4a543cdda70c{padding:8px 12px;background:#f3f4f6;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin-bottom:15px;font-family:monospace;font-size:12px;color:#6b7280}.alert.jsx-8a4a543cdda70c{padding:12px 16px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;margin-bottom:20px;font-weight:500}.alert-error.jsx-8a4a543cdda70c{background:#fef2f2;color:#dc2626;border:1px solid#fecaca}.alert-warning.jsx-8a4a543cdda70c{background:#fffbeb;color:#d97706;border:1px solid#fed7aa}.alert-success.jsx-8a4a543cdda70c{background:#f0fdf4;color:#16a34a;border:2px solid#22c55e;-webkit-box-shadow:0 4px 12px rgba(34,197,94,.15);-moz-box-shadow:0 4px 12px rgba(34,197,94,.15);box-shadow:0 4px 12px rgba(34,197,94,.15);font-weight:600;-webkit-animation:successFadeIn.3s ease-out;-moz-animation:successFadeIn.3s ease-out;-o-animation:successFadeIn.3s ease-out;animation:successFadeIn.3s ease-out}@-webkit-keyframes successFadeIn{from{opacity:0;-webkit-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes successFadeIn{from{opacity:0;-moz-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes successFadeIn{from{opacity:0;-o-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes successFadeIn{from{opacity:0;-webkit-transform:translatey(-10px);-moz-transform:translatey(-10px);-o-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.block-form.jsx-8a4a543cdda70c{background:#f9fafb;padding:25px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;margin-bottom:30px}.block-form.jsx-8a4a543cdda70c h3.jsx-8a4a543cdda70c{margin:0 0 20px 0;color:#374151}.form-group.jsx-8a4a543cdda70c{margin-bottom:20px}.form-group.jsx-8a4a543cdda70c label.jsx-8a4a543cdda70c{display:block;margin-bottom:6px;font-weight:600;color:#374151}.form-input.jsx-8a4a543cdda70c,.form-select.jsx-8a4a543cdda70c{width:100%;padding:10px 12px;border:1px solid#d1d5db;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;-webkit-transition:border-color.2s;-moz-transition:border-color.2s;-o-transition:border-color.2s;transition:border-color.2s}.form-input.jsx-8a4a543cdda70c:focus,.form-select.jsx-8a4a543cdda70c:focus{outline:none;border-color:#3b82f6;-webkit-box-shadow:0 0 0 3px rgba(59,130,246,.1);-moz-box-shadow:0 0 0 3px rgba(59,130,246,.1);box-shadow:0 0 0 3px rgba(59,130,246,.1)}.radio-group.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:20px}.radio-label.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:12px;cursor:pointer;font-weight:normal;padding:12px;border:1px solid#e5e7eb;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;margin-bottom:8px}.radio-label.jsx-8a4a543cdda70c:hover{background:#f9fafb;border-color:#d1d5db}.radio-label.jsx-8a4a543cdda70c input[type="radio"].jsx-8a4a543cdda70c:checked+.radio-content.jsx-8a4a543cdda70c{color:#1e40af}.radio-label.jsx-8a4a543cdda70c input[type="radio"].jsx-8a4a543cdda70c:checked{accent-color:#3b82f6}.radio-content.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:4px}.radio-title.jsx-8a4a543cdda70c{font-weight:600;font-size:14px}.radio-desc.jsx-8a4a543cdda70c{font-size:12px;color:#6b7280;font-style:italic}.time-range-inputs.jsx-8a4a543cdda70c{margin-bottom:20px}.time-range-header.jsx-8a4a543cdda70c{margin-bottom:15px;padding:15px;background:#fef3f2;border:1px solid#fed7d7;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.time-range-header.jsx-8a4a543cdda70c h4.jsx-8a4a543cdda70c{margin:0 0 8px 0;color:#1e293b;font-size:16px}.time-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{display:inline-block;width:-webkit-calc(50% - 10px);width:-moz-calc(50% - 10px);width:calc(50% - 10px);margin-right:20px;vertical-align:top}.time-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c:last-of-type{margin-right:0}.time-range-info.jsx-8a4a543cdda70c{margin-top:15px;padding:12px;background:#fff7ed;border:1px solid#fed7aa;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;text-align:center}.time-preview.jsx-8a4a543cdda70c{color:#ea580c;font-weight:600;font-size:14px}.date-range-inputs.jsx-8a4a543cdda70c{margin-bottom:20px}.date-range-header.jsx-8a4a543cdda70c{grid-column:1/-1;margin-bottom:15px;padding:15px;background:#f8fafc;border:1px solid#e2e8f0;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.date-range-header.jsx-8a4a543cdda70c h4.jsx-8a4a543cdda70c{margin:0 0 8px 0;color:#1e293b;font-size:16px}.help-text.jsx-8a4a543cdda70c{margin:0;color:#64748b;font-size:14px;font-style:italic}.date-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{display:inline-block;width:-webkit-calc(50% - 10px);width:-moz-calc(50% - 10px);width:calc(50% - 10px);margin-right:20px;vertical-align:top}.date-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c:last-of-type{margin-right:0}.date-range-info.jsx-8a4a543cdda70c{margin-top:15px;padding:15px;background:#f0f9ff;border:1px solid#bfdbfe;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;text-align:center}.days-count.jsx-8a4a543cdda70c{display:block;font-weight:600;color:#1e40af;margin-bottom:8px;font-size:16px}.date-preview.jsx-8a4a543cdda70c{display:block;color:#374151;font-size:14px;margin-bottom:8px}.warning-text.jsx-8a4a543cdda70c{display:block;font-size:12px;color:#d97706;font-weight:500}.btn-block.jsx-8a4a543cdda70c{background:#dc2626;color:white;border:none;padding:12px 24px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-weight:600;cursor:pointer;font-size:16px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.btn-block.jsx-8a4a543cdda70c:hover:not(:disabled){background:#b91c1c}.btn-block.jsx-8a4a543cdda70c:disabled{background:#9ca3af;cursor:not-allowed}.blocked-times-list.jsx-8a4a543cdda70c h3.jsx-8a4a543cdda70c{color:#374151;margin-bottom:20px}.blocks-grid.jsx-8a4a543cdda70c{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.block-item.jsx-8a4a543cdda70c{background:#fff;border:1px solid#e5e7eb;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:15px;-webkit-transition:box-shadow.2s;-moz-transition:box-shadow.2s;-o-transition:box-shadow.2s;transition:box-shadow.2s}.block-item.jsx-8a4a543cdda70c:hover{-webkit-box-shadow:0 4px 6px rgba(0,0,0,.1);-moz-box-shadow:0 4px 6px rgba(0,0,0,.1);box-shadow:0 4px 6px rgba(0,0,0,.1)}.block-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px}.block-date.jsx-8a4a543cdda70c{font-weight:600;color:#1f2937}.btn-unblock.jsx-8a4a543cdda70c{background:none;border:none;font-size:16px;cursor:pointer;padding:4px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.btn-unblock.jsx-8a4a543cdda70c:hover{background:#fee2e2}.block-time.jsx-8a4a543cdda70c{margin-bottom:8px}.full-day.jsx-8a4a543cdda70c{color:#dc2626;font-weight:600}.time-range.jsx-8a4a543cdda70c{color:#059669;font-weight:600}.block-reason.jsx-8a4a543cdda70c{color:#6b7280;margin-bottom:8px}.block-meta.jsx-8a4a543cdda70c{font-size:12px;color:#9ca3af}.loading.jsx-8a4a543cdda70c,.no-blocks.jsx-8a4a543cdda70c{text-align:center;color:#6b7280;padding:40px;font-style:italic}.mt-2.jsx-8a4a543cdda70c{margin-top:8px}.blocked-times-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:15px}.bulk-controls.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.btn-bulk-toggle.jsx-8a4a543cdda70c{background:#f3f4f6;border:1px solid#d1d5db;color:#374151;padding:8px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;font-weight:500}.btn-bulk-toggle.jsx-8a4a543cdda70c:hover{background:#e5e7eb}.btn-bulk-toggle.active.jsx-8a4a543cdda70c{background:#3b82f6;color:white;border-color:#3b82f6}.btn-bulk-action.jsx-8a4a543cdda70c{background:#f9fafb;border:1px solid#d1d5db;color:#6b7280;padding:6px 12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:13px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.btn-bulk-action.jsx-8a4a543cdda70c:hover:not(:disabled){background:#f3f4f6;color:#374151}.btn-bulk-action.jsx-8a4a543cdda70c:disabled{opacity:.5;cursor:not-allowed}.btn-bulk-delete.jsx-8a4a543cdda70c{background:#dc2626;border:1px solid#dc2626;color:white;padding:6px 12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:13px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;font-weight:500}.btn-bulk-delete.jsx-8a4a543cdda70c:hover:not(:disabled){background:#b91c1c;border-color:#b91c1c}.btn-bulk-delete.jsx-8a4a543cdda70c:disabled{opacity:.5;cursor:not-allowed}.block-item.selected.jsx-8a4a543cdda70c{border-color:#3b82f6;background:#eff6ff;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 4px 12px rgba(59,130,246,.15);-moz-box-shadow:0 4px 12px rgba(59,130,246,.15);box-shadow:0 4px 12px rgba(59,130,246,.15)}.checkbox-container.jsx-8a4a543cdda70c{position:relative;margin-right:12px}.block-checkbox.jsx-8a4a543cdda70c{width:18px;height:18px;accent-color:#3b82f6;cursor:pointer}.checkbox-label.jsx-8a4a543cdda70c{cursor:pointer}.block-header.jsx-8a4a543cdda70c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px}.block-date.jsx-8a4a543cdda70c{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;font-weight:600;color:#1f2937}@media(max-width:768px){.blocked-times-header.jsx-8a4a543cdda70c{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.bulk-controls.jsx-8a4a543cdda70c{-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.radio-group.jsx-8a4a543cdda70c{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}.time-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{width:100%;margin-right:0;margin-bottom:15px}.date-range-inputs.jsx-8a4a543cdda70c .form-group.jsx-8a4a543cdda70c{width:100%;margin-right:0;margin-bottom:15px}.blocks-grid.jsx-8a4a543cdda70c{grid-template-columns:1fr}}'})]}):(0,r.jsxs)("div",{className:"admin-calendar-management",children:[(0,r.jsxs)("div",{className:"calendar-header",children:[(0,r.jsx)("h2",{children:"\uD83D\uDCC5 Kalender-Verwaltung"}),a&&(0,r.jsx)("button",{onClick:a,className:"btn-close",children:"✕"})]}),(0,r.jsx)("div",{className:"alert alert-error",children:"❌ Sie sind nicht angemeldet. Bitte laden Sie die Seite neu oder melden Sie sich erneut an."})]})}function x(){let e=(0,o.useRouter)(),[a,t]=(0,s.useState)(!1),[n,u]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let a=(0,c.Aj)(d.I8,async a=>{if(!a){e.push("/login");return}try{let r=(0,l.hJ)(d.db,"admins"),n=(0,l.IO)(r,(0,l.ar)("email","==",a.email));if((await (0,l.PL)(n)).empty){e.push("/");return}t(!0)}catch(a){console.error("Fehler bei der Admin-\xdcberpr\xfcfung:",a),e.push("/")}finally{u(!1)}});return()=>a()},[e]),n)?(0,r.jsxs)("div",{className:"admin-loading",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"\xdcberpr\xfcfe Berechtigung..."})]}):a?(0,r.jsxs)("div",{className:"jsx-b79edc273ccbf3a admin-calendar-page",children:[(0,r.jsx)("div",{className:"jsx-b79edc273ccbf3a admin-nav",children:(0,r.jsx)("button",{onClick:()=>e.push("/admin"),className:"jsx-b79edc273ccbf3a btn-back",children:"← Zur\xfcck zum Admin Dashboard"})}),(0,r.jsx)("main",{className:"jsx-b79edc273ccbf3a calendar-main",children:(0,r.jsx)(m,{})}),(0,r.jsx)(i(),{id:"b79edc273ccbf3a",children:".admin-calendar-page.jsx-b79edc273ccbf3a{min-height:100vh;background:#f3f4f6;padding:20px}.admin-nav.jsx-b79edc273ccbf3a{max-width:1e3px;margin:0 auto 20px auto}.btn-back.jsx-b79edc273ccbf3a{background:#6b7280;color:white;border:none;padding:10px 20px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;font-size:14px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.btn-back.jsx-b79edc273ccbf3a:hover{background:#4b5563}.calendar-main.jsx-b79edc273ccbf3a{max-width:1e3px;margin:0 auto}.admin-loading.jsx-b79edc273ccbf3a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-height:100vh;gap:20px}.loading-spinner.jsx-b79edc273ccbf3a{width:40px;height:40px;border:4px solid#e5e7eb;border-top:4px solid#3b82f6;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):null}},3608:function(e,a,t){"use strict";t.d(a,{IJ:function(){return s},N0:function(){return m},NB:function(){return c},VR:function(){return o},g4:function(){return l},getBlockedTimesForDate:function(){return d},hS:function(){return b},isTimeSlotBlocked:function(){return u},wi:function(){return i}});var r=t(5978),n=t(6108);async function i(e,a,t,i){try{console.log("\uD83D\uDEAB Sperre Datumsbereich: ".concat(e," bis ").concat(a," - Grund: ").concat(t));let s=new Date(e),o=new Date(a);if(s>o)return{success:!1,error:"Startdatum muss vor Enddatum liegen"};let c=Math.ceil((o.getTime()-s.getTime())/864e5)+1;if(c>365)return{success:!1,error:"Maximal 365 Tage k\xf6nnen gleichzeitig gesperrt werden"};let l=0,u=0,m=[],x=new Date(s);for(;x<=o;){let e=x.toISOString().split("T")[0],a=await d(e);if(a.find(e=>e.isFullDay))console.log("⚠️ Tag ".concat(e," bereits gesperrt - \xfcberspringe")),u++,m.push("".concat(e," bereits gesperrt"));else{for(let e of a)!e.isFullDay&&e.id&&await (0,r.oe)((0,r.doc)(n.db,"blocked_times",e.id));await (0,r.ET)((0,r.hJ)(n.db,"blocked_times"),{date:e,isFullDay:!0,reason:t,createdAt:r.Timestamp.now(),createdBy:i}),l++,console.log("✅ Tag ".concat(e," erfolgreich gesperrt"))}x.setDate(x.getDate()+1)}if(0===l)return{success:!1,error:"Alle ".concat(c," Tage waren bereits gesperrt"),blockedDays:0};if(u>0)return{success:!0,error:"".concat(l,"/").concat(c," Tage gesperrt. ").concat(u," bereits gesperrt: ").concat(m.slice(0,3).join(", ")).concat(m.length>3?"...":""),blockedDays:l};return{success:!0,blockedDays:l}}catch(e){return console.error("❌ Fehler beim Sperren des Datumsbereichs:",e),{success:!1,error:"Fehler beim Sperren des Datumsbereichs"}}}async function s(e,a,t){try{console.log("\uD83D\uDEAB Sperre ganzen Tag: ".concat(e," - Grund: ").concat(a));let i=await d(e);if(i.find(e=>e.isFullDay))return{success:!1,error:"Dieser Tag ist bereits vollst\xe4ndig gesperrt"};for(let e of i)!e.isFullDay&&e.id&&await (0,r.oe)((0,r.doc)(n.db,"blocked_times",e.id));return await (0,r.ET)((0,r.hJ)(n.db,"blocked_times"),{date:e,isFullDay:!0,reason:a,createdAt:r.Timestamp.now(),createdBy:t}),console.log("✅ Ganzer Tag erfolgreich gesperrt: ".concat(e)),{success:!0}}catch(e){return console.error("❌ Fehler beim Sperren des ganzen Tags:",e),{success:!1,error:"Fehler beim Sperren des Tages"}}}async function o(e,a,t,i,s){try{console.log("\uD83D\uDEAB Sperre Zeitraum: ".concat(e," ").concat(a,"-").concat(t," - Grund: ").concat(i));let o=await d(e);if(o.find(e=>e.isFullDay))return{success:!1,error:"Dieser Tag ist bereits vollst\xe4ndig gesperrt"};if(o.some(e=>{if(e.isFullDay||!e.startTime||!e.endTime)return!1;let r=x(e.startTime),n=x(e.endTime),i=x(a),s=x(t);return i<n&&s>r}))return{success:!1,error:"Zeitraum \xfcberschneidet sich mit bestehender Sperrung"};return await (0,r.ET)((0,r.hJ)(n.db,"blocked_times"),{date:e,startTime:a,endTime:t,isFullDay:!1,reason:i,createdAt:r.Timestamp.now(),createdBy:s}),console.log("✅ Zeitraum erfolgreich gesperrt: ".concat(e," ").concat(a,"-").concat(t)),{success:!0}}catch(e){return console.error("❌ Fehler beim Sperren des Zeitraums:",e),{success:!1,error:"Fehler beim Sperren des Zeitraums"}}}async function c(e){try{return console.log("✅ Hebe Sperrung auf: ".concat(e)),await (0,r.oe)((0,r.doc)(n.db,"blocked_times",e)),console.log("✅ Sperrung erfolgreich aufgehoben: ".concat(e)),{success:!0}}catch(e){return console.error("❌ Fehler beim Aufheben der Sperrung:",e),{success:!1,error:"Fehler beim Aufheben der Sperrung"}}}async function d(e){try{let a=(0,r.IO)((0,r.hJ)(n.db,"blocked_times"),(0,r.ar)("date","==",e)),t=await (0,r.PL)(a),i=[];return t.forEach(e=>{i.push({id:e.id,...e.data()})}),i.sort((e,a)=>{var t,r,n,i,s,o;let c=(null===(n=e.createdAt)||void 0===n?void 0:null===(r=n.toDate)||void 0===r?void 0:null===(t=r.call(n))||void 0===t?void 0:t.getTime())||0;return((null===(o=a.createdAt)||void 0===o?void 0:null===(s=o.toDate)||void 0===s?void 0:null===(i=s.call(o))||void 0===i?void 0:i.getTime())||0)-c}),i}catch(t){var a;if(console.error("❌ Fehler beim Abrufen der gesperrten Zeiten:",t),null===(a=t.message)||void 0===a?void 0:a.includes("index")){console.warn("⚠️ Firebase Index wird ben\xf6tigt. Verwende einfache Abfrage...");try{let a=await (0,r.PL)((0,r.hJ)(n.db,"blocked_times")),t=[];return a.forEach(a=>{let r={id:a.id,...a.data()};r.date===e&&t.push(r)}),t}catch(e){console.error("❌ Auch Fallback-Abfrage fehlgeschlagen:",e)}}return[]}}async function l(e,a){try{let t=(0,r.IO)((0,r.hJ)(n.db,"blocked_times"),(0,r.ar)("date",">=",e),(0,r.ar)("date","<=",a)),i=await (0,r.PL)(t),s=[];return i.forEach(e=>{s.push({id:e.id,...e.data()})}),s.sort((e,a)=>{var t,r,n,i,s,o;if(e.date!==a.date)return e.date.localeCompare(a.date);let c=(null===(n=e.createdAt)||void 0===n?void 0:null===(r=n.toDate)||void 0===r?void 0:null===(t=r.call(n))||void 0===t?void 0:t.getTime())||0;return((null===(o=a.createdAt)||void 0===o?void 0:null===(s=o.toDate)||void 0===s?void 0:null===(i=s.call(o))||void 0===i?void 0:i.getTime())||0)-c}),s}catch(i){var t;if(console.error("❌ Fehler beim Abrufen der gesperrten Zeiten f\xfcr Bereich:",i),null===(t=i.message)||void 0===t?void 0:t.includes("index")){console.warn("⚠️ Firebase Index wird ben\xf6tigt. Verwende Fallback...");try{let t=await (0,r.PL)((0,r.hJ)(n.db,"blocked_times")),i=[];return t.forEach(t=>{let r={id:t.id,...t.data()};r.date>=e&&r.date<=a&&i.push(r)}),i}catch(e){console.error("❌ Fallback-Abfrage fehlgeschlagen:",e)}}return[]}}async function u(e,a){try{let t=await d(e);if(t.some(e=>e.isFullDay))return!0;let r=x(a);return t.some(e=>{if(e.isFullDay||!e.startTime||!e.endTime)return!1;let a=x(e.startTime),t=x(e.endTime);return r>=a&&r<t})}catch(e){return console.error("❌ Fehler beim Pr\xfcfen der Zeitslot-Sperrung:",e),!1}}async function m(e){try{return(await d(e)).some(e=>e.isFullDay)}catch(e){return console.error("❌ Fehler beim Pr\xfcfen der Ganztags-Sperrung:",e),!1}}function x(e){let[a,t]=e.split(":").map(Number);return 60*a+t}async function b(){try{console.log("\uD83D\uDCCB Lade alle gesperrten Zeiten...");let e=await (0,r.PL)((0,r.hJ)(n.db,"blocked_times")),a=[];return e.forEach(e=>{a.push({id:e.id,...e.data()})}),console.log("\uD83D\uDCCB ".concat(a.length," gesperrte Zeiten gefunden, sortiere manuell...")),a.sort((e,a)=>{var t,r,n,i,s,o;if(e.date!==a.date)return e.date.localeCompare(a.date);let c=(null===(n=e.createdAt)||void 0===n?void 0:null===(r=n.toDate)||void 0===r?void 0:null===(t=r.call(n))||void 0===t?void 0:t.getTime())||0;return((null===(o=a.createdAt)||void 0===o?void 0:null===(s=o.toDate)||void 0===s?void 0:null===(i=s.call(o))||void 0===i?void 0:i.getTime())||0)-c}),console.log("✅ Alle gesperrten Zeiten sortiert: ".concat(a.length," Eintr\xe4ge")),a}catch(a){var e;return console.error("❌ Fehler beim Abrufen aller gesperrten Zeiten:",a),(null===(e=a.message)||void 0===e?void 0:e.includes("index"))&&(console.warn("⚠️ Firebase Index-Problem erkannt. Das ist normal beim ersten Mal."),console.info("\uD83D\uDCA1 Firebase erstellt automatisch Indizes im Hintergrund. Bitte warten Sie einige Minuten.")),[]}}}},function(e){e.O(0,[358,657,432,108,971,117,744],function(){return e(e.s=118)}),_N_E=e.O()}]);