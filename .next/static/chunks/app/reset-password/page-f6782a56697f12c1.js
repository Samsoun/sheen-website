(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{2:function(e,n,s){Promise.resolve().then(s.bind(s,8886))},9376:function(e,n,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(n,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(n,{useSearchParams:function(){return r.useSearchParams}})},8886:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return a}});var r=s(7437),t=s(2265),i=s(9376),l=s(6108);function o(){let[e,n]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[a,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null),[h,m]=(0,t.useState)(!1),[g,f]=(0,t.useState)(!1),[x,b]=(0,t.useState)(""),p=(0,i.useSearchParams)(),w=(0,i.useRouter)();(0,t.useEffect)(()=>{try{console.log("Suche nach Reset-Code in URL...");let e=p.get("oobCode"),n=p.get("mode"),s=p.get("apiKey");if(console.log("Gefundene Parameter:",{oobCode:e,mode:n,apiKey:s}),e){console.log("oobCode in SearchParams gefunden:",e),c(e);return}{let e=new URLSearchParams(window.location.search).get("oobCode");if(e){console.log("oobCode in URLSearchParams gefunden:",e),c(e);return}let n=window.location.href;console.log("Volle URL:",n);let s=n.match(/oobCode=([^&]+)/);if(s&&s[1]){console.log("oobCode in URL-String gefunden:",s[1]),c(s[1]);return}}console.log("Kein oobCode gefunden, setze Fehlermeldung"),u("Es wurde kein Reset-Code in der URL gefunden. Sie k\xf6nnen einen neuen Reset-Link anfordern oder den Code manuell eingeben, falls Sie ihn haben.")}catch(e){console.error("Fehler beim Extrahieren des Reset-Codes:",e),u("Beim Verarbeiten des Reset-Links ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut oder fordern Sie einen neuen Reset-Link an.")}},[p]);let j=async n=>{n.preventDefault();let r=a||x;if(!r){u("Bitte geben Sie einen Reset-Code ein oder fordern Sie einen neuen Reset-Link an.");return}if(e!==s){u("Die Passw\xf6rter stimmen nicht \xfcberein.");return}if(e.length<8){u("Das Passwort muss mindestens 8 Zeichen lang sein.");return}f(!0),u(null);try{console.log("Versuche Passwort zur\xfcckzusetzen mit Code:",r);let n=await (0,l.LG)(r,e);n.success?(console.log("Passwort erfolgreich zur\xfcckgesetzt"),m(!0),setTimeout(()=>{w.push("/login")},3e3)):(console.error("Fehler beim Zur\xfccksetzen des Passworts:",n.error),u(n.error||"Fehler beim Zur\xfccksetzen des Passworts. Bitte fordern Sie einen neuen Link an."))}catch(e){console.error("Unerwarteter Fehler beim Passwort-Reset:",e),u("Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{f(!1)}};return(0,r.jsx)("div",{className:"login-container",children:(0,r.jsx)("div",{className:"w-full max-w-2xl mx-auto px-6",children:(0,r.jsxs)("div",{className:"login-card",children:[(0,r.jsxs)("div",{className:"login-header",children:[(0,r.jsx)("h1",{className:"login-title",children:"Passwort zur\xfccksetzen"}),(0,r.jsx)("p",{className:"login-subtitle",children:"Geben Sie Ihr neues Passwort ein"})]}),(0,r.jsx)("div",{className:"login-body",children:h?(0,r.jsxs)("div",{className:"p-4 bg-green-100 text-green-700 rounded-md text-lg",children:[(0,r.jsx)("p",{children:"Ihr Passwort wurde erfolgreich zur\xfcckgesetzt!"}),(0,r.jsx)("p",{className:"mt-2",children:"Sie werden in K\xfcrze zur Anmeldeseite weitergeleitet..."})]}):(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-md text-lg",children:[d,(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("button",{onClick:()=>w.push("/login?reset=true"),className:"login-link",children:"Neuen Reset-Link anfordern"})})]}),!a&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 text-yellow-700 rounded-md",children:[(0,r.jsx)("p",{className:"mb-2",children:"Wenn Sie einen Reset-Code in der E-Mail oder URL haben, geben Sie ihn hier ein:"}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("input",{type:"text",placeholder:"Reset-Code eingeben",className:"login-input mr-2",value:x,onChange:e=>b(e.target.value)})})]}),(0,r.jsxs)("form",{onSubmit:j,children:[(0,r.jsxs)("div",{className:"login-form-group",children:[(0,r.jsx)("label",{htmlFor:"password",className:"login-label",children:"Neues Passwort"}),(0,r.jsx)("input",{id:"password",type:"password",value:e,onChange:e=>n(e.target.value),required:!0,minLength:8,className:"login-input",placeholder:"Mindestens 8 Zeichen"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Das Passwort muss mindestens 8 Zeichen lang sein"})]}),(0,r.jsxs)("div",{className:"login-form-group",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"login-label",children:"Passwort best\xe4tigen"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:s,onChange:e=>o(e.target.value),required:!0,className:"login-input",placeholder:"Passwort wiederholen"})]}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"login-button mt-6",children:g?"Wird zur\xfcckgesetzt...":"Passwort zur\xfccksetzen"})]}),(0,r.jsx)("div",{className:"login-footer mt-8",children:(0,r.jsxs)("p",{className:"text-lg text-gray-600",children:["Zur\xfcck zur"," ",(0,r.jsx)("button",{type:"button",onClick:()=>w.push("/login"),className:"login-link",children:"Anmeldeseite"})]})})]})})]})})})}function a(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Wird geladen..."}),children:(0,r.jsx)(o,{})})}s(1887)},1887:function(){}},function(e){e.O(0,[38,358,657,432,108,971,117,744],function(){return e(e.s=2)}),_N_E=e.O()}]);